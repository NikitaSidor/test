<?php
$c=&$this->config;$c['settings_version']="1.4.16";$c['manager_theme']="default";$c['server_offset_time']="0";$c['manager_language']="russian-UTF8";$c['modx_charset']="UTF-8";$c['site_name']="Туристическое агентство «Ваше турагентство»";$c['site_start']="1";$c['error_page']="64";$c['unauthorized_page']="1";$c['site_status']="1";$c['auto_template_logic']="sibling";$c['default_template']="5";$c['old_template']="5";$c['publish_default']="1";$c['friendly_urls']="1";$c['friendly_alias_urls']="1";$c['use_alias_path']="1";$c['cache_type']="1";$c['failed_login_attempts']="10";$c['blocked_minutes']="30";$c['use_captcha']="0";$c['emailsender']="mail@mail.ru";$c['use_editor']="1";$c['use_browser']="1";$c['fe_editor_lang']="russian-UTF8";$c['fck_editor_toolbar']="standard";$c['fck_editor_autolang']="0";$c['editor_css_path']="";$c['editor_css_selectors']="";$c['upload_maxsize']="10485760";$c['manager_layout']="4";$c['auto_menuindex']="1";$c['session.cookie.lifetime']="604800";$c['mail_check_timeperiod']="600";$c['manager_direction']="ltr";$c['xhtml_urls']="0";$c['automatic_alias']="1";$c['datetime_format']="dd-mm-YYYY";$c['warning_visibility']="0";$c['remember_last_tab']="1";$c['enable_bindings']="1";$c['seostrict']="1";$c['number_of_results']="30";$c['theme_refresher']="";$c['show_picker']="0";$c['show_newresource_btn']="1";$c['show_fullscreen_btn']="1";$c['site_id']="620a45501d2b8";$c['site_unavailable_page']="";$c['reload_site_unavailable']="";$c['site_unavailable_message']="В настоящее время сайт недоступен.";$c['siteunavailable_message_default']="В настоящее время сайт недоступен.";$c['enable_filter']="1";$c['enable_at_syntax']="0";$c['cache_default']="1";$c['search_default']="1";$c['custom_contenttype']="application/rss+xml,application/pdf,application/vnd.ms-word,application/vnd.ms-excel,text/html,text/css,text/xml,text/javascript,text/plain,application/json";$c['docid_incrmnt_method']="0";$c['enable_cache']="1";$c['minifyphp_incache']="0";$c['server_protocol']="http";$c['rss_url_news']="http://feeds.feedburner.com/evocms-release-news";$c['track_visitors']="0";$c['top_howmany']="10";$c['friendly_url_prefix']="";$c['friendly_url_suffix']="";$c['make_folders']="1";$c['aliaslistingfolder']="0";$c['allow_duplicate_alias']="1";$c['use_udperms']="1";$c['udperms_allowroot']="0";$c['email_method']="mail";$c['smtp_auth']="1";$c['smtp_secure']="ssl";$c['smtp_host']="mail.ru";$c['smtp_port']="465";$c['smtp_username']="";$c['reload_emailsubject']="";$c['emailsubject']="Данные для авторизации";$c['emailsubject_default']="Данные для авторизации";$c['reload_signupemail_message']="";$c['signupemail_message']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации в системе управления сайтом [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации в системе управления сайтом ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['system_email_signup_default']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации в системе управления сайтом [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации в системе управления сайтом ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['reload_websignupemail_message']="";$c['websignupemail_message']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации на [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации на [+sname+] ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['system_email_websignup_default']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации на [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации на [+sname+] ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['reload_system_email_webreminder_message']="";$c['webpwdreminder_message']="Здравствуйте, [+uid+]!\r\n\r\nЧтобы активировать ваш новый пароль, перейдите по следующей ссылке:\r\n\r\n[+surl+]\r\n\r\nПозже вы сможете использовать следующий пароль для авторизации: [+pwd+]\r\n\r\nЕсли это письмо пришло к вам по ошибке, пожалуйста, проигнорируйте его.\r\n\r\nС уважением, Администрация";$c['system_email_webreminder_default']="Здравствуйте, [+uid+]!\r\n\r\nЧтобы активировать ваш новый пароль, перейдите по следующей ссылке:\r\n\r\n[+surl+]\r\n\r\nПозже вы сможете использовать следующий пароль для авторизации: [+pwd+]\r\n\r\nЕсли это письмо пришло к вам по ошибке, пожалуйста, проигнорируйте его.\r\n\r\nС уважением, Администрация";$c['tree_page_click']="27";$c['use_breadcrumbs']="1";$c['global_tabs']="1";$c['group_tvs']="0";$c['resource_tree_node_name']="pagetitle";$c['session_timeout']="15";$c['tree_show_protected']="0";$c['datepicker_offset']="-10";$c['number_of_logs']="100";$c['number_of_messages']="40";$c['which_editor']="TinyMCE4";$c['tinymce4_theme']="custom";$c['tinymce4_skin']="lightgray";$c['tinymce4_template_docs']="";$c['tinymce4_template_chunks']="Реквизиты";$c['tinymce4_entermode']="p";$c['tinymce4_element_format']="html";$c['tinymce4_schema']="html5";$c['tinymce4_custom_plugins']="advlist autolink lists link image charmap print preview hr anchor pagebreak searchreplace wordcount visualblocks visualchars code fullscreen spellchecker insertdatetime media nonbreaking save table contextmenu directionality emoticons template paste textcolor codesample colorpicker textpattern imagetools paste modxlink youtube template";$c['tinymce4_custom_buttons1']="undo redo | cut copy paste | searchreplace | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent blockquote | styleselect";$c['tinymce4_custom_buttons2']="link unlink anchor image media codesample table | hr removeformat | subscript superscript charmap | nonbreaking | visualchars visualblocks print preview fullscreen code formatselect template";$c['tinymce4_custom_buttons3']="";$c['tinymce4_custom_buttons4']="";$c['tinymce4_blockFormats']="Paragraph=p;Header 1=h1;Header 2=h2;Header 3=h3";$c['allow_eval']="with_scan";$c['safe_functions_at_eval']="time,date,strtotime,strftime";$c['check_files_onlogin']="index.php\r\n.htaccess\r\nmanager/index.php\r\nmanager/includes/config.inc.php";$c['validate_referer']="1";$c['rss_url_security']="http://feeds.feedburner.com/evocms-security-news";$c['error_reporting']="1";$c['send_errormail']="0";$c['pwd_hash_algo']="UNCRYPT";$c['reload_captcha_words']="";$c['captcha_words']="EVO,Access,Better,BitCode,Chunk,Cache,Desc,Design,Excell,Enjoy,URLs,TechView,Gerald,Griff,Humphrey,Holiday,Intel,Integration,Joystick,Join(),Oscope,Genetic,Light,Likeness,Marit,Maaike,Niche,Netherlands,Ordinance,Oscillo,Parser,Phusion,Query,Question,Regalia,Righteous,Snippet,Sentinel,Template,Thespian,Unity,Enterprise,Verily,Tattoo,Veri,Website,WideWeb,Yap,Yellow,Zebra,Zygote";$c['captcha_words_default']="EVO,Access,Better,BitCode,Chunk,Cache,Desc,Design,Excell,Enjoy,URLs,TechView,Gerald,Griff,Humphrey,Holiday,Intel,Integration,Joystick,Join(),Oscope,Genetic,Light,Likeness,Marit,Maaike,Niche,Netherlands,Ordinance,Oscillo,Parser,Phusion,Query,Question,Regalia,Righteous,Snippet,Sentinel,Template,Thespian,Unity,Enterprise,Verily,Tattoo,Veri,Website,WideWeb,Yap,Yellow,Zebra,Zygote";$c['filemanager_path']="/home/d/directpr/test.directpr.beget.tech/public_html/";$c['upload_files']="bmp,ico,gif,jpeg,jpg,png,psd,tif,tiff,fla,flv,swf,aac,au,avi,css,cache,doc,docx,gz,gzip,htaccess,htm,html,js,mp3,mp4,mpeg,mpg,ods,odp,odt,pdf,ppt,pptx,rar,tar,tgz,txt,wav,wmv,xls,xlsx,xml,z,zip,JPG,JPEG,PNG,GIF,svg,webp";$c['upload_images']="bmp,ico,gif,jpeg,jpg,png,psd,tif,tiff,svg";$c['upload_media']="au,avi,mp3,mp4,mpeg,mpg,wav,wmv";$c['upload_flash']="fla,flv,swf";$c['new_file_permissions']="0644";$c['new_folder_permissions']="0755";$c['which_browser']="mcpuk";$c['rb_webuser']="0";$c['rb_base_dir']="/home/d/directpr/test.directpr.beget.tech/public_html/assets/";$c['rb_base_url']="assets/";$c['clean_uploaded_filename']="1";$c['strip_image_paths']="1";$c['maxImageWidth']="1600";$c['maxImageHeight']="1600";$c['thumbWidth']="150";$c['thumbHeight']="150";$c['thumbsDir']=".thumbs";$c['jpegQuality']="90";$c['denyZipDownload']="0";$c['denyExtensionRename']="0";$c['showHiddenFiles']="0";$c['lang_code']="ru";$c['sys_files_checksum']="a:2:{s:63:\"/home/d/directpr/test.directpr.beget.tech/public_html/index.php\";s:32:\"725319ce22424747bae4b350ad8cb598\";s:63:\"/home/d/directpr/test.directpr.beget.tech/public_html/.htaccess\";s:32:\"3483d867fb6772f27c06fb6a85a00d62\";}";$c['smtppw']="MQ%%B3PQqJh";$c['email_sender_method']="1";$c['manager_theme_mode']="2";$c['tinymce4_skintheme']="inlite";$c['client_phone1']="8 (495) 638-54-70";$c['client_phone1-full']="74956385470";$c['client_adres1']="ул. Титова, 23";$c['client_phone2']="8 (800) 505-04-17";$c['client_phone2-full']="78005050417";$c['client_adres2']="ул. Тувинских Добровольцев, 18А";$c['client_workTime1']="ПН-ПТ с 9-00 до 18-00";$c['client_workTime2']="ПН-ПТ с 9-00 до 18-00";$c['client_fotoOffice1']="assets/images/contacts/titova.jpg";$c['client_fotoOffice2']="assets/images/contacts/dobrovolcev2.jpg";$c['login_logo']="";$c['login_bg']="";$c['login_form_position']="left";$c['manager_menu_position']="top";$c['client_addressLocality']="г. Москва";$c['client_streetAddress']="Старопетровский проезд д.10 Б";$c['client_viber1']="1";$c['client_whatsapp1']="1";$c['client_workTime']="ПН-ПТ  с 11:00 до 20:00 \r\nСБ-ВС с 11:00 до 18:00";$c['client_position']="43.485363, 43.610512";$c['client_vk']="https://vk.com/";$c['client_vkid']="";$c['client_facebook']="https://www.facebook.com";$c['client_instagtram']="https://www.instagram.com";$c['client_twitter']="https://twitter.com";$c['client_okdnoklassniki']="https://ok.ru";$c['client_logo']="assets/images/logo.png";$c['client_title']="Восторг Тур";$c['client_subtitle']="Ваше турагентство";$c['client_formbg']="assets/images/company/quickOrderForm-bg.jpg";$c['client_theme']="dark_matter";$c['client_viber2']="";$c['client_whatsapp2']="";$c['client_email']="";$c['clientResize']="0";$c['noThumbnailsRecreation']="0";$c['a']="30";$c['chunk_processor']="";$c['enable_mootools']="1";$c['login_form_style']="dark";$c['client_clients']="1175";$c['client_departure']="832";$c['client_phone3']="";$c['client_phone3-full']="";$c['client_viber3']="";$c['client_whatsapp3']="";$c['client_orderEmail']="mail@mail.ru";$c['client_telegram']="durov_russia";$c['client_telegram1']="1";$c['client_telegram2']="";$c['disable_chunk_cache']="0";$c['disable_snippet_cache']="0";$c['disable_plugins_cache']="0";$c['client_telegramApi']="5775982521:AAHpn3Vz2C6GaFgTfPHiI84Qva_g-4kWWhE";$c['client_cookie-notification']="1";$this->aliasListing=array();$a=&$this->aliasListing;$d=&$this->documentListing;$m=&$this->documentMap;$a[1]=array('id'=>1,'alias'=>'index','path'=>'','parent'=>0,'isfolder'=>0,'alias_visible'=>1);$d['index']=1;$m[]=array(0=>1);$a[2]=array('id'=>2,'alias'=>'tury-po-rossii','path'=>'','parent'=>0,'isfolder'=>0,'alias_visible'=>1);$d['tury-po-rossii']=2;$m[]=array(0=>2);$a[61]=array('id'=>61,'alias'=>'contacts','path'=>'','parent'=>0,'isfolder'=>0,'alias_visible'=>1);$d['contacts']=61;$m[]=array(0=>61);$a[71]=array('id'=>71,'alias'=>'news','path'=>'','parent'=>0,'isfolder'=>1,'alias_visible'=>1);$d['news']=71;$m[]=array(0=>71);$a[63]=array('id'=>63,'alias'=>'sluzhebnoe','path'=>'','parent'=>0,'isfolder'=>1,'alias_visible'=>0);$d['sluzhebnoe']=63;$m[]=array(0=>63);$a[64]=array('id'=>64,'alias'=>'404','path'=>'','parent'=>63,'isfolder'=>0,'alias_visible'=>1);$d['404']=64;$m[]=array(63=>64);$a[65]=array('id'=>65,'alias'=>'sitemap.xml','path'=>'','parent'=>63,'isfolder'=>0,'alias_visible'=>1);$d['sitemap.xml']=65;$m[]=array(63=>65);$a[66]=array('id'=>66,'alias'=>'karta-sajta','path'=>'','parent'=>63,'isfolder'=>0,'alias_visible'=>1);$d['karta-sajta']=66;$m[]=array(63=>66);$a[70]=array('id'=>70,'alias'=>'politika','path'=>'','parent'=>63,'isfolder'=>0,'alias_visible'=>1);$d['politika']=70;$m[]=array(63=>70);$a[160]=array('id'=>160,'alias'=>'search','path'=>'','parent'=>63,'isfolder'=>0,'alias_visible'=>1);$d['search']=160;$m[]=array(63=>160);$a[219]=array('id'=>219,'alias'=>'dorogoj-gorod-dlya-puteshestvennikov','path'=>'news','parent'=>71,'isfolder'=>0,'alias_visible'=>1);$d['news/dorogoj-gorod-dlya-puteshestvennikov']=219;$m[]=array(71=>219);$a[220]=array('id'=>220,'alias'=>'v-sochi-postroyat-novuyu-kanatnuyu-dorogu','path'=>'news','parent'=>71,'isfolder'=>0,'alias_visible'=>1);$d['news/v-sochi-postroyat-novuyu-kanatnuyu-dorogu']=220;$m[]=array(71=>220);$a[221]=array('id'=>221,'alias'=>'v-bangkoke-otkrylas-neobychnaya-smotrovaya-ploshhadka','path'=>'news','parent'=>71,'isfolder'=>0,'alias_visible'=>1);$d['news/v-bangkoke-otkrylas-neobychnaya-smotrovaya-ploshhadka']=221;$m[]=array(71=>221);$a[222]=array('id'=>222,'alias'=>'nazvana-samaya-opasnaya-dlya-zdorovya-rossijskih-turistov-strana','path'=>'news','parent'=>71,'isfolder'=>0,'alias_visible'=>1);$d['news/nazvana-samaya-opasnaya-dlya-zdorovya-rossijskih-turistov-strana']=222;$m[]=array(71=>222);$a[223]=array('id'=>223,'alias'=>'blogery-snyali-rolik-pro-polugolyh-turistov-v-sochi-i-vyzvali-vostorg-v-seti','path'=>'news','parent'=>71,'isfolder'=>0,'alias_visible'=>1);$d['news/blogery-snyali-rolik-pro-polugolyh-turistov-v-sochi-i-vyzvali-vostorg-v-seti']=223;$m[]=array(71=>223);$a[224]=array('id'=>224,'alias'=>'nazvana-samaya-loyalnaya-strana-evropy-dlya-vydachi-rabochih-viz','path'=>'news','parent'=>71,'isfolder'=>0,'alias_visible'=>1);$d['news/nazvana-samaya-loyalnaya-strana-evropy-dlya-vydachi-rabochih-viz']=224;$m[]=array(71=>224);$c=&$this->contentTypes;$c['65']='text/xml';$c=&$this->chunkCache;$c['HEADER']='<!DOCTYPE html>
<html lang="ru" class="theme-[(client_theme)]">
<head>
	<meta charset="utf-8">
	<title>[*title*]</title>
	[*noIndex*]
	<meta name="keywords" content="[*keyw*]" >
	<meta name="description" content ="[*desc*]">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	
	<link rel="canonical" href="[[canonical]]"/>
	<meta property="og:title" content="[*title*]">
	<meta property="og:url" content="[[canonical]]">
	<meta property="og:image" content="[(site_url)][(client_logo)]">
	<meta property="og:description" content="[*desc*]">
	<meta property="og:locale" content="ru_RU">
	<meta property="og:site_name" content="[(site_name)]">
	<meta property="og:type" content="website">
	
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" href="/favicon.ico" type="image/x-icon" />
	<link href="/template/css/style.css?v=17" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:400&amp;subset=cyrillic" rel="stylesheet">
	<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->	
	
	<link rel="preconnect" href="//api-maps.yandex.ru">
	<link rel="dns-prefetch" href="//api-maps.yandex.ru">	
	
</head>
<body>

<header class="b-header">
	<div class="wr wr_header" itemscope="" itemtype="http://schema.org/Organization">
		<div class="header__col-1">
			<a href="/" class="b-logo logo_header">
				<span class="logo__figure">
					<img src="[(site_url)][(client_logo)]" alt="[(site_name)]" class="logo__img" itemprop="logo">	
				</span>
				<span class="b-slogan">
					<span class="slogan__title">[(client_title)]</span>
					<span class="slogan__subtitle">[(client_subtitle)]</span>
				</span>
			</a>
		</div>

		<div class="header__col-2">
			<div class="b-header-extra">
				<button class="btn btn_accent btn_block b-btn-callback js-callback-btn"><span class="middle">Обратный звонок</span></button>	

			</div>
		</div>
		
		<div class="header__col-3">
			<div class="b-contacts contacts_header">
				<meta itemprop="name" content="[(site_name)]">
				
				<div class="contacts__phone">
					[[if? &is=`[(client_viber1)]:=:1` &then=`
					<a href="viber://add?number=[(client_phone1-full)]">
						<svg class="icn icn-soc-viber middle"><use xlink:href="/template/svg/icons.svg#icn-soc-viber"></use></svg>
					</a>
					`]]
					
					[[if? &is=`[(client_whatsapp1)]:=:1` &then=`
					<a href="https://wa.me/[(client_phone1-full)]" target="_blank">
						<svg class="icn icn-soc-whatsapp middle"><use xlink:href="/template/svg/icons.svg#icn-soc-whatsapp"></use></svg>
					</a>
					`]]
					
					[[if? &is=`[(client_telegram1)]:=:1` &then=`
					<a href="http://t.me/[(client_telegram)]" target="_blank">
						<svg class="icn icn-soc-telegram-round middle"><use xlink:href="/template/svg/icons.svg#icn-soc-telegram-round"></use></svg>
					</a>
					`]]
					
					[[if? &is=`[(client_phone1)]:notempty` &then=`
					<a itemprop="telephone" href="tel:+[(client_phone1-full)]">
						<svg class="icn icn-ui-phone middle"><use xlink:href="/template/svg/icons.svg#icn-ui-phone"></use></svg>
						<span class="middle">[(client_phone1)]</span>
					</a>
					`]]
				</div>
				
								
				<div class="contacts__phone">
					[[if? &is=`[(client_viber2)]:=:1` &then=`
					<a href="viber://add?number=[(client_phone2-full)]">
						<svg class="icn icn-soc-viber middle"><use xlink:href="/template/svg/icons.svg#icn-soc-viber"></use></svg>
					</a>
					`]]
					
					[[if? &is=`[(client_whatsapp2)]:=:1` &then=`
					<a href="https://wa.me/[(client_phone2-full)]"  target="_blank">
						<svg class="icn icn-soc-whatsapp middle"><use xlink:href="/template/svg/icons.svg#icn-soc-whatsapp"></use></svg>
					</a>
					`]]
					
					[[if? &is=`[(client_telegram2)]:=:1` &then=`
					<a href="http://t.me/[(client_telegram)]"  target="_blank">
						<svg class="icn icn-soc-telegram-round middle"><use xlink:href="/template/svg/icons.svg#icn-soc-telegram-round"></use></svg>
					</a>
					`]]
					
					[[if? &is=`[(client_phone2)]:notempty` &then=`
					<a itemprop="telephone" href="tel:+[(client_phone2-full)]">
						<svg class="icn icn-ui-phone middle"><use xlink:href="/template/svg/icons.svg#icn-ui-phone"></use></svg>
						<span class="middle">[(client_phone2)]</span>
					</a>
					`]]					
				</div>

				[[if? &is=`[(client_phone3)]:notempty` &then=`
					<div class="contacts__phone">
						[[if? &is=`[(client_viber3)]:=:1` &then=`
						<a href="viber://add?number=[(client_phone3-full)]">
							<svg class="icn icn-soc-viber middle"><use xlink:href="/template/svg/icons.svg#icn-soc-viber"></use></svg>
						</a>
						`]]

						[[if? &is=`[(client_whatsapp3)]:=:1` &then=`
						<a href="https://wa.me/[(client_phone3-full)]"  target="_blank">
							<svg class="icn icn-soc-whatsapp middle"><use xlink:href="/template/svg/icons.svg#icn-soc-whatsapp"></use></svg>
						</a>
						`]]
						<a itemprop="telephone" href="tel:+[(client_phone3-full)]">
							<svg class="icn icn-ui-phone middle"><use xlink:href="/template/svg/icons.svg#icn-ui-phone"></use></svg>
							<span class="middle">[(client_phone3)]</span>
						</a>
					</div>`					
				]]								
				
				<div class="contacts__address">
					<a itemprop="address" href="/[~61~]">[(client_addressLocality)]<br>[(client_streetAddress)]</a>
				</div>
			</div>
		</div>
	</div>
</header>
<nav class="b-nav-top">
	<div class="wr wr_nav-top">
		[[DLMenu?
			&parents=`0`
			&maxDepth=`2`
			&prepare=`menuTopCountry`
			&tvList=`countryID`
			&parentRowTpl=`@CODE:<li[+classes+]><a href="[+url+]">[+title+]</a>[+wrap+]<i class="nav-top__icon js-nav-top__toggle-item"><svg class="icn icn-ui-chevron-down"><use xlink:href="/template/svg/icons.svg#icn-ui-chevron-down"></use></svg></i></li>`
			&parentClass=`nav-top__parent`
		]]
	</div>
</nav>
';$c['mm_rules']='// more example rules are in assets/plugins/managermanager/example_mm_rules.inc.php
// example of how PHP is allowed - check that a TV named documentTags exists before creating rule

if ($modx->db->getValue($modx->db->select(\'count(id)\', $modx->getFullTableName(\'site_tmplvars\'), "name=\'documentTags\'"))) {
	mm_widget_tags(\'documentTags\', \' \'); // Give blog tag editing capabilities to the \'documentTags (3)\' TV
}
mm_widget_showimagetvs(); // Always give a preview of Image TVs

mm_createTab(\'Модули\', \'widgets\', \'\', \'\', \'\', \'\');
mm_moveFieldsToTab(\'widgets\', \'widgets\', \'\', \'\');


mm_createTab(\'SEO\', \'seo\', \'\', \'\', \'\', \'\');
mm_moveFieldsToTab(\'title,longtitle,keyw,desc,seoOverride,noIndex,sitemap_changefreq,sitemap_priority,sitemap_exclude\', \'seo\', \'\', \'\');
mm_widget_tags(\'keyw\',\',\'); // Give blog tag editing capabilities to the \'documentTags (3)\' TV

mm_hideFields(\'link_attributes,description\', \'\', \'\');



//mm_createTab(\'Images\', \'photos\', \'\', \'\', \'\', \'850\');
//mm_moveFieldsToTab(\'images,photos\', \'photos\', \'\', \'\');

//mm_hideFields(\'longtitle,description,link_attributes,menutitle,content\', \'\', \'6,7\');


//mm_hideTemplates(\'0,5,8,9,11,12\', \'2,3\');

//mm_hideTabs(\'settings, access\', \'2\');
';$c['newsItem']='<div class="news__item clr">
	<div class="news__date">[+date+]</div>
	<h3 class="news__title"><a href="[+url+]">[+pagetitle+]</a></h3>
	<div class="news__introtext">[+introtext+]</div>
</div>';$c['teamItem']='<div class="team__item team__item_inner">
	<div class="team__figure team__figure_inner">
		<img src="/[[phpthumb? &input=`[+image+]` &options=`w=241,h=241,q=85,zc=1`]]" alt="[+name+]" class="team__img">
	</div>
	<div class="team__info">
		<div class="team__name team__name_inner">[+name+]</div>
		<div class="team__position team__position_inner">[+post+]</div>
		<div class="team__phone team__phone_inner">[+phone+]</div>
		<div class="team__phone team__office_inner">[+officetext+]</div>
		<div class="team__credo team__credo_inner">[[nl2br? &data=`[+text+]`]]</div>
	</div>
</div>';$c['exGal']='<div class="b-ex-slider" id="slider-1">
	<div class="ex-slider__list">
		[+images+]
	</div>

	<!-- THUMBNAILS -->
	<div class="ex-slider__thumbs">
	</div>

</div>';$c['exGalItem']='<div class="ex-slider__item">
	<div href="[+images.image.url_gallery_image+]" rel="ex-1" title="[+images.image.title+]">
		<img data-lazy="[+images.image.url_gallery_image+]" src="[+images.image.url_gallery_image+]" alt="[+images.image.alt+]" class="ex-slider__img" data-thumb="[+images.image.url_thumbnail_image+]">
	</div>
</div>';$c['exItem.del']='<div class="ex__item clr">
	<div class="ex-card__wr">
		<div class="ex-card__img-wr">
			<a href="[~[+id+]~]" class="ex-card__wr-link"><img title="[+pagetitle+]" alt="[+pagetitle+]" class="ex-card__img" src="[[phpthumb? &input=`[[getImgFromGallery? &id=`[+id+]`]]` &options=`w=292,h=195,q=85,zc=1`]]"></a>
		</div>
		
		[[if? &is=`[+duration+]||notempty` &separator=`||` &then=`<div class="ex-card__nearest">[+duration+]</div>`]]
		

		<div class="ex-card__info">
			<h3 class="ex-card__title"><a href="[~[+id+]~]" class="ex-card__link" title="[+pagetitle+]">[[TruncateString? &text=`[+pagetitle+]` &limit=`50`]]</a></h3>
			[[if? &is=`[+route+]||notempty` &separator=`||` &then=`<div class="ex-card__duration">[+route+]</div>`]]
			<div class="ex-card__desc">[+introtext+]</div>
			
			<div class="ex-card__price-wr clr">
				<div class="ex-card__price">от [*price*]</div>
				<a href="[~[+id+]~]" class="btn ex-card__btn btn--middle">Купить</a>
			</div>
		</div>
	</div>
</div>';$c['FOOTER']='<footer class="b-footer">
<div class="container">
	<div class="row footer__row footer__row_1">
		<div class="col-12 col-sm-6 col-md-4 footer__col footer__col_1">
			<div class="b-social">
				[[if? &is=`[(client_vk)]||!empty` &then=`
				<a rel=\'nofollow\' target=\'_blank\' href="[(client_vk)]" class="social__link">
					<svg class="icn"><use xlink:href="/template/svg/icons.svg#icn-soc-vk"></use></svg>
				</a>` &separator=`||`]]
				
				[[if? &is=`[(client_facebook)]||!empty` &then=`
				<a rel=\'nofollow\' target=\'_blank\' href="[(client_facebook)]" class="social__link">
					<svg class="icn"><use xlink:href="/template/svg/icons.svg#icn-soc-fb"></use></svg>
				</a>` &separator=`||`]]
				
				[[if? &is=`[(client_instagtram)]||!empty` &then=`
				<a rel=\'nofollow\' target=\'_blank\' href="[(client_instagtram)]" class="social__link">
					<svg class="icn"><use xlink:href="/template/svg/icons.svg#icn-soc-in"></use></svg>
				</a>` &separator=`||`]]
				
				[[if? &is=`[(client_twitter)]||!empty` &then=`
				<a rel=\'nofollow\' target=\'_blank\' href="[(client_twitter)]" class="social__link">
					<svg class="icn"><use xlink:href="/template/svg/icons.svg#icn-soc-tw"></use></svg>
				</a>` &separator=`||`]]
				
				[[if? &is=`[(client_okdnoklassniki)]||!empty` &then=`
				<a rel=\'nofollow\' target=\'_blank\' href="[(client_okdnoklassniki)]" class="social__link">
					<svg class="icn"><use xlink:href="/template/svg/icons.svg?v=1#icn-soc-ok"></use></svg>
				</a>` &separator=`||`]]
				[[if? &is=`[(client_telegram)]||!empty` &then=`
				<a rel=\'nofollow\' target=\'_blank\' href="https://t.me/[(client_telegram)]" class="social__link">
					<svg class="icn"><use xlink:href="/template/svg/icons.svg#icn-soc-telegram"></use></svg>
				</a>` &separator=`||`]]
			</div>

			<div class="b-copy">
				[(site_name)], [!$_SERVER[\'REQUEST_TIME\']:dateFormat=\'Y\'!]
			</div>
			
			<div class="b-madein">
				Разработка сайта —
				<a href="http://tursite.org" target="_blank" class="madein__link" rel=\'nofollow\'>Фабрика турсайтов</a>
			</div>
			
			<div class="b-agreement-link">
				<a href="/[~70~]" target="_blank" class="madein__link" rel=\'nofollow\'>Политика конфиденциальности</a>
			</div>
			
		</div>
		
		<div class="col-12 col-sm-6 col-md-4 footer__col footer__col_2">
			<nav class="b-nav-footer">
				[[DLMenu? &parents=`0` &maxDepth=`1`]]
			</nav>
			
			<div class="pay-system">
				<svg class="icn icn-pay"><use xlink:href="/template/svg/icons.svg#icn-pay-mir"></use></svg>
				<svg class="icn icn-pay"><use xlink:href="/template/svg/icons.svg#icn-pay-visa"></use></svg>
				<svg class="icn icn-pay"><use xlink:href="/template/svg/icons.svg#icn-pay-mastercard"></use></svg>
				<svg class="icn icn-pay"><use xlink:href="/template/svg/icons.svg#icn-pay-maestro"></use></svg>
			</div>
		</div>
		
		<div class="col-12 col-sm-6 col-md-4 footer__col footer__col_3">
			<div class="b-contacts contacts_footer">
										
			[[if? &is=`[(client_phone1)]:notempty` &then=`
				<div class="contacts__phone">				
					<a href="tel:[(client_phone1-full)]">
						<svg class="icn icn-ui-phone middle"><use xlink:href="/template/svg/icons.svg#icn-ui-phone"></use></svg>
						<span class="middle">[(client_phone1)]</span>
					</a>
				</div>					
			`]]
													
			[[if? &is=`[(client_phone2)]:notempty` &then=`
				<div class="contacts__phone">														
					<a href="tel:[(client_phone2-full)]">
						<svg class="icn icn-ui-phone middle"><use xlink:href="/template/svg/icons.svg#icn-ui-phone"></use></svg>
						<span class="middle">[(client_phone2)]</span>
					</a>
				</div>					
			`]]					
											
			[[if? &is=`[(client_phone3)]:notempty` &then=`
				<div class="contacts__phone">														
					<a href="tel:[(client_phone3-full)]">
						<svg class="icn icn-ui-phone middle"><use xlink:href="/template/svg/icons.svg#icn-ui-phone"></use></svg>
						<span class="middle">[(client_phone3)]</span>
					</a>
				</div>												
			`]]					
						
			<div class="contacts__address">
				<a href="/[~61~]">[(client_addressLocality)]<br>[(client_streetAddress)]</a>
			</div>
				
			</div>
			
			<div class="footer__extra">
				<a href="" class="js-callback-btn">Заказать обратный звонок</a><br>
				<a href="/[~62~]" class="">Заявка на подбор тура</a>
			</div>
			
		</div>
		
	</div>
	

</div>
</footer>
<button class="b-back-to-top">Наверх</button>
<!-- callback-->
<div class="b-popup">
	<div class="popup__wr popup_callback">
		<div class="popup__header">Заказ обратного звонка</div>
		<form method="post" action="/form/" class="callback-form js-form-submit">			
			<div class="popup__descr">Оставьте Ваш телефон и наш специалист свяжется с Вами в ближайшее время</div>
			<input name="form" type="hidden" value="callback">
			
			
			<input type="hidden" name=\'page_id\' value="[*id*]">
			<input type="hidden" name=\'pagetitle\' value="[*pagetitle*]">
			<div class="popup__row clr">
				<label for="popup-name"  class="popop__label">Ваше имя</label>
				<div class="popup__field">
					<input type="text" name=\'name\' class="dn" value="">
					<input type="text" name="n" id="popup-name"  value="" required>
				</div>
			</div>
			<div class="popup__row clr">
				<label for="popup-tel"  class="popop__label">Ваш телефон</label>
				<div class="popup__field">
					<input type="text" name=\'phone\' class="dn form__protect"  value="">
					<input type="text" name="t" id="popup-tel"  value="" required class="phonemask">
				</div>
			</div>
			<div class="popup__row clr">
				<label for="popup-msg"  class="popop__label">Примечание</label>
				<div class="popup__field">
					<textarea name="m" id="popup-msg" class="popup__textarea"></textarea>
				</div>
			</div>
			<div class="popup__row  clr ">
				<div class="popup__field personal-field">
					<input name="personal" type="checkbox" value="1" id="quick-order__pers-call" required checked>
					<label for="quick-order__pers-call">Подтверждаю согласие на <a href="/[~70~]" target="_blank">обработку персональных данных</a></label>
				</div>
			</div> 
			<div class="popup__row clr">
				<div class="popop__label">&nbsp;</div>
				<div class="popup__field">
					<button type="submit" name="submit" class="btn btn_callback_submit form__submit"><span class="middle">Заказать звонок</span></button>
				</div>
			</div>
		</form>
		<div class="form__success">Ваша заявка успешно отправлена.<br>Наши менеджеры свяжутся с Вами.</div>
		<div class="form__error">Произошла ошибка</div>
	</div>
</div>
<!-- /callback-->

[[if? &is=`[(client_cookie-notification)]:=:1` &then=`
<!-- Cookie -->
<div class="cookie-agreement animate__animated animate__fadeInUp" style="display: none">
	<div class="container">
		<div class="cookie-agreement__wr">
			<div class="cookie-agreement__content">
				<div class="cookie-agreement__header">Этот сайт использует файлы cookie</div>
				<div class="cookie-agreement__text">
					Используя наш веб-сайт, вы соглашаетесь с использованием файлов cookie и <a href="/[~70~]">Политикой конфиденциальности</a>
					
				</div>
			</div>
			<div class="cookie-agreement__buttons">
				<div class="cookie-agreement__btn-ok">Принять</div>
			</div>
		</div>
	</div>
</div>
<!-- /Cookie -->
`]]

<!-- MySQL: [^q^] запросов за [^qt^] сек, PHP: [^p^] сек, Total: [^t^] сек. From [^s^]-->

<script src="/template/js/libs.js"></script>
<script src="/template/js/slick/slick.min.js"></script>
<script src="/template/js/flatpickr/flatpickr.min.js"></script>
<!-- <script src="/template/js/fancybox/jquery.fancybox.pack.js"></script> -->

<script src="/template/js/script.js?ver=5"></script>

<link href="/template/js/slick/slick.css" rel="stylesheet">
<link href="/template/js/flatpickr/flatpickr.css" rel="stylesheet">
<link href="/template/css/jquery.fancybox.min.css" rel="stylesheet" type="text/css">
<script src="/template/js/daterangepicker/moment.js"></script>
<script src="/template/js/daterangepicker/jquery.daterangepicker.js"></script>
<link href="/template/js/daterangepicker/daterangepicker.min.css" rel="stylesheet" type="text/css">

</body>
</html>';$c['REVIEWS']='[!JotX? &config=`reviews` &subscribe=`1` &pagination=`30` &captcha=`2` &moderated=`1`  &notifyAuthor=`1`  &notify=`2` !]';$c['AWARDS']='<div class="b-awards">
[[sgLister? 
    &thumbSnippet=`phpthumb`
    &thumbOptions=`w=210&h=297&zc=1&q=85`
    &tpl=`@CODE:
		<div class="awards__item">
			<a href="/[+sg_image+]" class="awards__link fancybox" data-fancybox="gallery">
				<img src="/[+thumb.sg_image+]" class="awards__img" alt="[+e.sg_title+]" title="[+e.sg_description+]">
			</a>
			<h2 class="awards__title">[+e.sg_title+]</h2>
			<div class="awards__descr">[+e.sg_description+]</div>
		</div>`
]]
</div>
';$c['ORDERS']='<div class="orders">
	
	<div class="orders__quick">
		<h2 class="h2">Заявка в один клик</h2>
		<form action="/form/" method="post" class="order-quick js-order-quick js-form-submit">
			<input name="form" type="hidden" value="order-short">
			<input name="phone" id="phone__order-long__row-idd" type="text" class="dn form__protect" value="">
			<input type="text" name="name" class="dn" value="">
			
			<div class="order-quick___title">Доверьте подбор тура профессионалам!</div>
			<div class="order-quick__row">
				<label for="order-quick__msg" class="order-quick__label">Пожелания к туру:</label>
				<textarea name="msg" id="order-quick__msg" class="order-quick__textarea">2 взрослых и ребенок 8 лет, хотим экскурсионный автобусный (ж/д) тур в Казань, выехать через неделю на 5-6 дней
				</textarea>
			</div>
			<div class="order-quick__row">
					<label for="order-quick__t"  class="order-quick__label">Телефон:</label>
					<input type="text" name="t"  value="" class="order-quick__input phonemask" required>
			</div>
			<div class="order-quick__row">
				 <label class="agreement__label">Подтверждаю согласие на <a href="/[~70~]">обработку персональных данных</a>
					<input type="checkbox" value="1" name="agr" class="agreement__checkbox" checked required>
				</label>
			</div>
			<div class="order-quick__row">
				<button type="submit" class="btn order-quick__submit btn_orange">Отправить</button>
			</div>
			<input type="hidden" name="formid" value="order-quick">
		</form>
		<div class="form__error order-quick__error">Возникла ошибка.<br>Попробуйте еще раз!</div>
		<div class="form__success order-quick__success">Заявка отправлена!<br>Мы свяжемся с Вами!</div>
	</div>


	<div class="orders__long">
		
		<h2 class="h2">Подробная заявка</h2>
		<form  class="order-long js-order-long js-form-submit" method="post" action="/form/">
			<input name="form" type="hidden" value="order-long">
			<input name="phone" type="text" class="dn form__protect" value="" >
			<input type="text" name="name" class="dn" value="">
			
			<div class="order-long__row">
				<label class="order-long__label">Откуда<span class="red">*</span></label>
				<div class="order-long__fields">
					<input type="text" name="from"  value="" class="order-long__input" required>
				</div>
			</div>
			<div class="order-long__row">
				<label class="order-long__label">Куда<span class="red">*</span></label>
				<div class="order-long__fields">
					<input type="text" name="to"  value=""  class="order-long__input" required>
				</div>
			</div>
			<div class="order-long__row">
				<label class="order-long__label">Поедут</label>
				<div class="order-long__fields">
					<div class="order-long__group">
						<div class="w50p">
							<input type="number" name="adults" placeholder="Взрослых"  value=""  class="order-long__input" min="0">
						</div>
						<div class="w50p">
							<input type="number" name="children" placeholder="Детей"  value=""  class="order-long__input" min="0">
						</div>
					</div>
				</div>
			</div>
			<div class="order-long__row">
				<label class="order-long__label">Вылет<span class="red">*</span></label>
				<div class="order-long__fields">
					<div class="order-long__group-">
						<div class="">
							<input type="text" name="date" class="js-datepicker-range order-long__input" placeholder="с - по" value="" required>
						</div>
						
					</div>
				</div>
			</div>
			<div class="order-long__row">
				<label class="order-long__label">Ночей</label>
				<div class="order-long__fields">
					<div class="order-long__group">
						<div class="w50p">
							<input type="number" name="nightsfrom" placeholder="От"  value=""  class="order-long__input" min="0">
						</div>
						<div class="w50p">
							<input type="number" name="nightsto" placeholder="До"  value=""  class="order-long__input" min="0">
						</div>
						<div class=\'w100p\'>
							<label>
								<input type="checkbox" name="day"  value=\'да\'   class="order-long__checkbox">Один день, без ночевки
							</label>
						</div>
					</div>
				</div>
			</div>
			<div class="order-long__row">
				<label class="order-long__label">Класс отеля</label>
				<div class="order-long__fields">
					<select name="hotel"  class="order-long__select">
						<option value="Любой" >Любой</option>
						<option value="2*" >2 звезды</option>
						<option value="3*" >3 звезды</option>
						<option value="4*" >4 звезды</option>
						<option value="5*" >5 звезды</option>
					</select>
				</div>
			</div>
			<div class="order-long__row">
				<label class="order-long__label">Питание</label>
				<div class="order-long__fields">
					<select name="meal"  class="order-long__select">
						<option value=\'Любое\' >Любое</option>
						<option value=\'RO\' >RO - Без питания</option>
						<option value=\'BB\' >BB - Только завтрак + напитки за завтраком</option>
						<option value=\'HB\' >HB - Завтрак и ужин + напитки за завтраком</option>
						<option value=\'FB\' >FB - Завтрак, обед и ужин + напитки за завтраком</option>
						<option value=\'AI\' >AI - Все включено. Еда и напитки (в том числе алкогольные) местного производства в течение всего дня</option>
						<option value=\'UAI\' >UAI - Все включено + импортные спиртные напитки и дополнительные услуги</option>
					</select>
				</div>
			</div>

			<div class="order-long__row">
				<label class="order-long__label">Цена</label>
				<div class="order-long__fields">
					<div class="order-long__group">
						<div class="w25p">
							<input type="number" name="pricefrom" placeholder="От"  value=""  class="order-long__input"  min="0">
						</div>
						<div class="w25p">
							<input type="number" name="priceto" placeholder="До"  value=""  class="order-long__input"  min="0">
						</div>
						<div class="w25p">
							<select name="currency"  class="order-long__select">
								<option value="RUB" >RUB</option>
								<option value="USD" >USD</option>
								<option value="EUR" >EUR</option>
							</select>
						</div>
						<div class="w25p">
							<select name="pricepart"  class="order-long__select">
								<option value="всех" >Всех</option>
								<option value="человека" >Человека</option>
							</select>
						</div>
					</div>
				</div>
			</div>
			<div class="order-long__row">
				<label class="order-long__label">ФИО<span class="red">*</span></label>
				<div class="order-long__fields">
					<input type="text" name="n"  value=""  class="order-long__input" required>
				</div>
			</div>
			<div class="order-long__row">
				<label class="order-long__label">Телефон<span class="red">*</span></label>
				<div class="order-long__fields">
					<input type="text" name="t"  value=""  class="order-long__input phonemask" id="order-long__tel" required>
				</div>
			</div>
			<div class="order-long__row">
				<label class="order-long__label">E-mail</label>
				<div class="order-long__fields">
					<input type="email" name="e"  value=""  class="order-long__input">
				</div>
			</div>
			<div class="order-long__row">
				<label class="order-long__label">Пожелания</label>
				<div class="order-long__fields">
					<textarea name="msg"  class="order-long__textarea"></textarea>
				</div>
			</div>
			<div class="order-long__row">
				<div class="order-long__label"></div>
				 <label class="agreement__label">Подтверждаю согласие на <a href="/[~70~]">обработку персональных данных</a>
					<input type="checkbox" value="1" name="agr" class="agreement__checkbox" checked required>
				</label>
			</div>
			<div class="order-long__row">
				<div class="order-long__label"></div>
				<div class="order-long__fields">
					
					<button type="submit" class="btn order-long__submit">Отправить</button>
				</div>
			</div>

			<input type="hidden" name="formid"  value="fullTourOrder" >
		</form>
		<div class="form__error order-long__error">Возникла ошибка.<br>Попробуйте еще раз!</div>
		<div class="form__success order-long__success">Заявка отправлена!<br>Мы свяжемся с Вами!</div>
	</div>
</div>
	
';$c['Реквизиты']='<h3>Туристическое агентство &laquo;[(site_name)]&raquo;</h3>
<p><strong>Юридический адрес:</strong>&nbsp;125130,&nbsp;Москва,&nbsp;Старопетровский проезд д.10 Б<br><strong>Фактический адрес:&nbsp;</strong>125130,&nbsp;Москва,&nbsp;Старопетровский проезд д.10 Б<br><strong>ИНН/КПП</strong>&nbsp;7743843268/774301001<br><strong>ОГРН</strong>&nbsp;1127746070231<br><strong>ОКВЭД&nbsp;</strong>74.13</p>
<h3>Банковские реквизиты:</h3>
<p><strong>Р/с&nbsp;</strong>40702810600000030409<br><strong>БИК</strong>&nbsp;044525716<br><strong>К/с&nbsp;</strong>30101810100000000716</p>';$c['COUNTRIES']='<nav class="b-nav-countries">
	<div class="nav-countries__title h2">Популярные страны</div>
		[[DLMenu? 
			&parents=`5` 
			&maxDepth=`1` 
			&tvList=`countryID` 
			&rowTpl=`@CODE:<li class="[+classNames+] nav-countries__item">
				<a href="[+url+]"><span class="nav-countries__flag fl-[+tv.countryID+]"></span>[+title+]</a>
			</li>` 
		]]
</nav>
<nav class="b-nav-countries">
	<div class="nav-countries__title h2">Остальные страны</div>
		[[DLMenu? 
			&parents=`5` 
			&maxDepth=`1` 
			&tvList=`countryID` 
			&addWhereList=\'hidemenu=1\' 
			&rowTpl=`@CODE:<li class="[+classNames+] nav-countries__item">
			<a href="[+url+]"><span class="nav-countries__flag fl-[+tv.countryID+]"></span>[+title+]</a></li>` 
		]]
</nav>';$c['ORDER-COUNTRY']='<div class="block__header">Заявка на тур [+country.name_kuda+]</div>
<form method="post" action="/form/" class="b-form form_tour js-form-submit">			
	
	<input name="form" type="hidden" value="order-country">
	<input type="text" name=\'name\' class="dn" value="">
	<input type="text" name=\'phone\' class="dn form__protect"  value="">
	<input type="hidden" name=\'page_id\' value="[*id*]">
	<input type="hidden" name=\'pagetitle\' value="[+country.name_kuda+]">
	<div class="form__row clr">
		<label for="form-n"  class="form__label">Ваше имя</label>
		<div class="form__field">
			<input type="text" name="n" id="form-n"  value="" required class="form__input">
		</div>
	</div>
	<div class="form__row clr">
		<label for="form-t"  class="form__label">Ваш телефон</label>
		<div class="form__field">
			<input type="text" name="t" id="form-t"  value="" required class="phonemask form__input">
		</div>
	</div>
	<div class="form__row clr">
		<label for="form-m"  class="form__label">Пожелания к туру</label>
		<div class="form__field">
			<textarea name="m" id="form-m" class="form__textarea"></textarea>
		</div>
	</div>
	<div class="form__row  clr ">
		<div class="form__field">
			<label class="form__label agreement__label">Подтверждаю согласие на <a href="/[~70~]" target="_blank">обработку персональных данных</a>
				<input type="checkbox" value="1" name="agr" class="form__checkbox agreement__checkbox" checked="checked" required>
			</label>
		</div>
	</div> 
	<div class="form__row clr">
		<div class="form__label">&nbsp;</div>
		<div class="form__field">
			<button type="submit" name="submit" class="btn form__submit form_tour_submit">Отправить</button>
		</div>
	</div>
</form>
<div class="form__success">Ваша заявка успешно отправлена.<br>Наши менеджеры свяжутся с Вами.</div>
<div class="form__error">Произошла ошибка,<br>попробуйте еще раз!</div>


';$c['toursItem']='<!-- item-->
<div class="col-12 col-sm-6 col-md-6 col-lg-4">
<div class="ex__item">
	<div class="ex-card__wr">
		<div class="ex-card__img-wr">
			<a href="/[~[+id+]~]" class="ex-card__wr-link">
				<img title="[+pagetitle+]" alt="[+pagetitle+]" class="ex-card__img" src="/[[phpthumb? &input=`[[getImgFromGallery? &id=`[+id+]`]]` &options=`w=292,h=195,q=85,zc=1`]]"></a>
		</div>
		
		[[if? &is=`[+tv.duration+]||notempty` &separator=`||` &then=`<div class="ex-card__nearest">[+tv.duration+]</div>`]]

		<div class="ex-card__info">
			<h3 class="ex-card__title"><a href="/[~[+id+]~]" class="ex-card__link" title="[+pagetitle+]">[[TruncateString? &text=`[+pagetitle+]` &limit=`60`]]</a></h3>
			
			[[if? &is=`[+tv.route+]||notempty` &then=`<div class="ex-card__duration">Маршрут: [+tv.route+]</div>` &separator=`||`]]
			<div class="ex-card__desc">[+introtext+]</div>
			
			<div class="ex-card__price-wr clr">
				[[if? &is=`[+tv.price+]||notempty` &then=`<div class="ex-card__price">от [+tv.price+] [+tv.priceLabel+]</div>` &separator=`||`]]
				<a href="/[~[+id+]~]" class="btn ex-card__btn btn--middle">Подробнее</a>
			</div>
		</div>
	</div>
</div>
</div>
<!-- /item-->
';$c['WEATHER']='<div class="block__header">Погода [+country.name_gde+]</div>
<a href="https://clck.yandex.ru/redir/dtype=stred/pid=7/cid=1228/*https://yandex.ru/pogoda/[+country.yandex_weather+]" target="_blank">
	<img src="https://info.weather.yandex.net/[+country.yandex_weather+]/2_white.ru.png?domain=ru" border="0" alt="Яндекс.Погода"/>
	<img width="1" height="1" src="https://clck.yandex.ru/click/dtype=stred/pid=7/cid=1227/*https://img.yandex.ru/i/pix.gif" alt="" border="0"/>
</a>';$c['MAP2']='<div class="ymap" data-coord="51.719137,94.431034" data-content="Океан счастья" data-hint="г. Кызыл, ул. Титова, 23"></div>';$c['small-review']='<div class="feedbacks__feedback cf">
 <div class="feedback_img">
    <img src="[+foto+]"/>
 </div>
  <div class="feedback_content">
    <div class=\'feedback_name\'>[+longtitle+]</div>
    <div class=\'feedback_comment\'>
      [+content+]
   </div>
  </div>
  <div class="feedback_where">
    <div class="feedback_when">[[reformDate? &date=`[+date+]`]]</div>
   <span>[+dest-resort+]</span> [+dest-hotel+]
 </div>
</div>';$c['articleItem']='<div class="article__item">
	<div class="article__figure">
		<img src="[[phpthumb? &input=`[+tv.foto+]` &options=`w=251,h=180,zc=1`]]" alt="[+pagetitle+]" class="article__foto">
	</div>
	<div class="article__text">
		<h3 class="article__title"><a href="[~[+id+]~]">[+pagetitle+]</a></h3>
		<div class="article__introtext">[+introtext+]</div>
	</div>
</div>';$c['ASIDE']='
<!-- news -->
<div class="block block_lighted news">
	<div class="block__header news__header_aside">Новости</div>
	<div class="news__list">
		[[DocLister? 
		&idType=`parents`
		&parents=`71` 
		&tpl=`newsItem`
		&display=`3`
		&total=`3` 
		&dateFormat=`%d.%m.%Y`
		&orderBy=`menuindex DESC`

		&id=`news`
		]]
	</div>
	<div class="news__more"><a href="/[~71~]" class="news-more__link">Все новости</a></div>
</div>
<!-- /news -->


<!-- soc widgets -->
<div class="block">

	{{VK? id=\'[(client_vkid)]\'}}
				
</div>
<!-- /soc widgets -->';$c['VK']='
<script type="text/javascript">
  window.vkAsyncInit = function() {
    VK.init({
      apiId: [+id+],
      onlyWidgets: true
    });
    VK.Widgets.Group("vk_groups", {mode: 0,redesign: 1, width: "auto", height: "350", color1: \'FFFFFF\', color2: \'000000\', color3: \'5E81A8\'}, [+id+]);
  };

  setTimeout(function() {
    var el = document.createElement("script");
    el.type = "text/javascript";
    el.src = "https://vk.com/js/api/openapi.js?156";
    el.async = true;
    document.getElementById("vk_groups").appendChild(el);
  }, 2000);
</script>
<!-- VK Widget -->
<div id="vk_groups"></div>';$c['MAP']='<div id="map"></div>
<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU"></script>
<script>
	
	
	let coord=\'[(client_position)]\';
	coord=coord.trim();
	
	
	if (coord){
		const coordCount = coord.split(\';\').length;
		const mapCenter = coord.split(\';\')[0].split(\',\');
		
		ymaps.ready(function () {
			var myMap = new ymaps.Map(\'map\', {
				center: mapCenter,
				zoom: 15
			},{
				searchControlProvider: \'yandex#search\'
			});
			
			
			
			coord=coord.split(\';\');
			if (coord.length){
				
				coord.forEach(el => {
					coord = el.split(\',\');
					coord[0] = coord[0].trim();
					coord[1] = coord[1].trim();
	
					if (coord[0]&&coord[1]){
						myPlacemark = new ymaps.Placemark(coord, { hintContent: \'[(site_name)]\', balloonContent: \'\' });
						myMap.geoObjects.add(myPlacemark);
					}
				})
				
			}
			
			myMap.controls.add(new ymaps.control.ZoomControl());
			myMap.controls.add(\'typeSelector\');
			
			if (coordCount > 1) {
				myMap.setBounds(myMap.geoObjects.getBounds(),{checkZoomRange:true, zoomMargin:9});
			}
			
		});
	}
</script>';$c['FEEDBACK']='<!-- feedback-->
<div class="b-feedback">
	<div class="feedback__header h3">Обратная связь</div>
	<form method="post" action="/form/" class="feedback__form js-form-submit">			
		<input name="form" type="hidden" value="feedback">
		<input type="hidden" name=\'page_id\' value="[*id*]">
		<input type="hidden" name=\'pagetitle\' value="[*pagetitle*]">
		<div class="form__row">
			<label for="feedback-name"  class="form__label">Ваше имя</label>
			<div class="form__field">
				<input type="text" name=\'name\' class="dn" value="">
				<input type="text" name="n" id="feedback-name"  value="" required>
			</div>
		</div>
		<div class="form__row">
			<label for="feedback-tel"  class="form__label">Ваш телефон</label>
			<div class="form__field">
				<input type="text" name=\'phone\' class="dn form__protect"  value="">
				<input type="text" name="t" id="feedback-tel"  value="" required class="phonemask">
			</div>
		</div>
		<div class="form__row">
			<label for="feedback-msg"  class="form__label">Примечание</label>
			<div class="form__field">
				<textarea name="m" id="feedback-msg" class="form__textarea"></textarea>
			</div>
		</div>
		<div class="form__row">
			<div class="form__field personal-field">
				<input name="personal" type="checkbox" value="1" id="feedback__personal" required checked>
				<label for="feedback__personal">Подтверждаю согласие на <a href="[~70~]" target="_blank">обработку персональных данных</a></label>
			</div>
		</div> 
		<div class="form__row">
			<div class="form__label">&nbsp;</div>
			<div class="form__field">
				<button type="submit" name="submit" class="btn btn_feedback_submit form__submit"><span class="middle">Отправить</span></button>
			</div>
		</div>
	</form>
	<div class="form__success">Ваша заявка успешно отправлена.<br>Наши менеджеры свяжутся с Вами.</div>
	<div class="form__error">Произошла ошибка</div>
</div>
<!-- /feedback-->';$c['teamItem-aside']='<div class="team__item team__item_aside">
	<div class="team__figure team__figure_aside">
		<img src="[[phpthumb? &input=`[+image+]` &options=`w=50,h=50,q=85,zc=1`]]" alt="[+name+]" class="team__img">
	</div>
	<div class="team__info">
		<div class="team__name team__name_aside">[+name+]</div>
		<div class="team__position">[+post+]</div>
		<div class="team__phone">[+phone+]</div>
	</div>
</div>';$c['doverieItem']='<div class="doverie__item">
	<div class="doverie__figure">
		<img src="[[phpthumb? &input=`[+tv.foto+]` &options=`w=251,h=180,zc=1`]]" alt="[+pagetitle+]" class="doverie__foto">
	</div>
	<div class="doverie__text">
		<h3 class="doverie__title"><a href="[~[+id+]~]">[+pagetitle+]</a></h3>
		<div class="doverie__date">[+date+]</div>
		<div class="doverie__introtext">[+introtext+]</div>
	</div>
</div>';$c['CONTACTS']='<h3 itemprop="name">[(site_name)]</h3>

<p><strong>Сайт:</strong>&nbsp;<a href="[(site_url)]">[(site_url)]</a></p>

<p><strong>Телефоны:</strong></p>

[[if? &is=`[(client_phone1)]:!empty` &then=`
	<p>
	 <a itemprop="telephone" href="tel:+[(client_phone1-full)]" class="contants__phone">[(client_phone1)]</a>

	[[if? &is=`[(client_viber1)]:=:1` &then=`
	<a href="viber://add?number=[(client_phone1-full)]">
		<svg class="icn icn-soc-viber middle"><use xlink:href="/template/svg/icons.svg#icn-soc-viber"></use></svg></a>
	`]]

	[[if? &is=`[(client_whatsapp1)]:=:1` &then=`
	<a href="https://wa.me/[(client_phone1-full)]"  target="_blank">
		<svg class="icn icn-soc-whatsapp middle"><use xlink:href="/template/svg/icons.svg#icn-soc-whatsapp"></use></svg>
	</a>
	`]]
	</p>
`]]

[[if? &is=`[(client_phone2)]:!empty` &then=`
	<p>
		<a itemprop="telephone" href="tel:+[(client_phone2-full)]" class="contants__phone">[(client_phone2)]</a>

	[[if? &is=`[(client_viber2)]:=:1` &then=`
	<a href="viber://add?number=[(client_phone2-full)]">
		<svg class="icn icn-soc-viber middle"><use xlink:href="/template/svg/icons.svg#icn-soc-viber"></use></svg>
	</a>
	`]]

	[[if? &is=`[(client_whatsapp2)]:=:1` &then=`
	<a href="https://wa.me/[(client_phone2-full)]"  target="_blank">
		<svg class="icn icn-soc-whatsapp middle"><use xlink:href="/template/svg/icons.svg#icn-soc-whatsapp"></use></svg>
	</a>
	`]]

	</p>
`]]

[[if? &is=`[(client_phone3)]:!empty` &then=`
	<p>
		<a itemprop="telephone" href="tel:+[(client_phone3-full)]" class="contants__phone">[(client_phone3)]</a>

	[[if? &is=`[(client_viber3)]:=:1` &then=`
	<a href="viber://add?number=[(client_phone3-full)]">
		<svg class="icn icn-soc-viber middle"><use xlink:href="/template/svg/icons.svg#icn-soc-viber"></use></svg>
	</a>
	`]]

	[[if? &is=`[(client_whatsapp3)]:=:1` &then=`
	<a href="https://wa.me/[(client_phone3-full)]"  target="_blank">
		<svg class="icn icn-soc-whatsapp middle"><use xlink:href="/template/svg/icons.svg#icn-soc-whatsapp"></use></svg>
	</a>
	`]]

	</p>
`]]
	
<p><strong>Эл. адрес:&nbsp;</strong><a href="mailto:[(client_email)]">[(client_email)]</a></p>

<p><span itemprop="address" itemscope="" itemtype="http://schema.org/PostalAddress"><strong>Адрес: </strong>[(client_addressLocality)], [(client_streetAddress)]</span></p>

<p><span><strong>Режим работы:&nbsp;</strong>[(client_workTime)]</span></p>
</div>

<div class="b-social">
	[[if? &is=`[(client_vk)]||!empty` &then=`
	<a rel=\'nofollow\' target=\'_blank\' href="[(client_vk)]" class="social__link">
		<svg class="icn"><use xlink:href="/template/svg/icons.svg#icn-soc-vk"></use></svg>
	</a>` &separator=`||`]]

	[[if? &is=`[(client_facebook)]||!empty` &then=`
	<a rel=\'nofollow\' target=\'_blank\' href="[(client_facebook)]" class="social__link">
		<svg class="icn"><use xlink:href="/template/svg/icons.svg#icn-soc-fb"></use></svg>
	</a>` &separator=`||`]]

	[[if? &is=`[(client_instagtram)]||!empty` &then=`
	<a rel=\'nofollow\' target=\'_blank\' href="[(client_instagtram)]" class="social__link">
		<svg class="icn"><use xlink:href="/template/svg/icons.svg#icn-soc-in"></use></svg>
	</a>` &separator=`||`]]

	[[if? &is=`[(client_twitter)]||!empty` &then=`
	<a rel=\'nofollow\' target=\'_blank\' href="[(client_twitter)]" class="social__link">
		<svg class="icn"><use xlink:href="/template/svg/icons.svg#icn-soc-tw"></use></svg>
	</a>` &separator=`||`]]

	[[if? &is=`[(client_okdnoklassniki)]||!empty` &then=`
	<a rel=\'nofollow\' target=\'_blank\' href="[(client_okdnoklassniki)]" class="social__link">
		<svg class="icn"><use xlink:href="/template/svg/icons.svg#icn-soc-ok"></use></svg>
	</a>` &separator=`||`]]
</div>


<h3 class="h3">Схема проезда</h3>

{{MAP}}

<div class="row">
	<div class="col-12 col-md-6">{{FEEDBACK}}</div>
	<div class="col-12 col-md-6 u-content">
		[[DocInfo? &docid=`74` &field=`content`]]
	</div>
</div>';$c['teamItem-main']='<div class="team__item team__item_main row">
	<div class="team__figure team__figure_main col-12 col-sm-4">
		<img src="/[[phpthumb? &input=`[+image+]` &options=`w=116,h=116,q=90,zc=1`]]" alt="[+name+]" class="team__img_main">
	</div>
	<div class="team__info_main col-12 col-sm-8">
		<div class="team__name team__name_main">[+name+]</div>
		<div class="team__position team__position_main">[+post+]</div>
		<div class="team__credo_main">[[nl2br? &data=`[+text+]`]]</div>
	</div>
</div>';$c['SPECIAL']='<div class="b-excursion">
	<div class="ex__list row">
		[!DocLister? 
		&idType=`parents`
		&parents=`5` 
		&depth=`4`
		&tpl=`toursItem`
		&tvList=`route,duration,price,dates,priceLabel`
		&orderBy=`menuindex DESC`
		&id=`tours`
		&addWhereList=`c.template=13`
		&filters=`AND(tv:offer:=:1;)`
		&paginate=`pages`
		&TplNextP=``
		&TplPrevP=``
		&TplPage=`@CODE: <li><a href="[+link+]">[+num+]</a></li>`
		&TplCurrentPage=`@CODE: <li class="active"><a href="[+link+]">[+num+]</a></li>`
		&TplWrapPaginate=`@CODE: <div class="pagination"><ul>[+wrap+]</ul></div>`
		!]
	</div>
</div>';$c['COUNTRIES-CUSTOM']='<nav class="b-nav-countries">
	<div class="nav-countries__title h2">Популярные страны</div>
	[[DLMenu? &parents=`5` &maxDepth=`1` &tvList=`countryID` &rowTpl=`@CODE:<li class="[+classNames+] nav-countries__item"><a href="[+url+]"><span class="nav-countries__flag fl-[+tv.countryID+]"></span>[+title+]</a></li>` ]]
</nav>

<div class="b-link">
	<a href="[~5~]" class="b-link__contries">Все страны</a>
</div>';$c['searchForm']='<form class="b-search  js-search-form" action="[~160~]" method="get">
	<div class="row">
		<div class="search__field search__field_region col-12 col-sm-6 col-md-2">
			<div class="search__label">Страна</div>
			<div class="search__field__wr">
				<div class="search__choise-link js-choiseToggle" data-label="Любая">Любая</div>

				<div class="checkbox-list-wr">
					<ul class="checkbox-list">
						<li class="checkbox-list__item">
							<input type="checkbox" name="region" value="0" class="checkbox-list__checkbox js-checkbox-list__checkbox--any" id="field-r-any" checked="checked">
							<label class="checkbox-list__title" for="field-r-any">Любая</label>
						</li>
						[!getCheckBoxList? &parent=`5` &name=`region`!]
					</ul>
					<div class="checkbox-list__close"></div>
				</div>
			</div>
		</div>


		<div class="search__field search__field_type col-12 col-sm-6 col-md-2">
			<div class="search__label">Тип отдыха</div>
			<div class="search__field__wr">
				<div class="search__choise-link js-choiseToggle" data-label="Любой">Любой</div>

				<div class="checkbox-list-wr">
					<ul class="checkbox-list">
						<li class="checkbox-list__item">
							<input type="checkbox" name="tourType" value="0" class="checkbox-list__checkbox js-checkbox-list__checkbox--any" id="field-r-any2" checked="checked">
							<label class="checkbox-list__title" for="field-r-any2" >Любой</label></li>
						[!getCheckBoxList? &parent=`161` &name=`tourType`!]
					</ul>
					<div class="checkbox-list__close"></div>
				</div>
			</div>
		</div>

		<div class="searchItemDuration search__field search__field_duration col-12 col-sm-6 col-md-3">
			<div class="search__label">Продолжительность</div>
			<div class="search__group">
				<div class="search__group-item">
					<select name="durationFrom" class="search__select search__duration search__duration--from">
						<option value="" selected>От</option>
						<option value="0">Любая</option>
						<option value="1">1 день</option>
						<option value="2">2 дня</option>
						<option value="3">3 дня</option>
						<option value="4">4 дня</option>
						<option value="5">5 дней</option>
						<option value="6">6 дней</option>
						<option value="7">7 дней</option>
						<option value="8">8 дней</option>
						<option value="9">9 дней</option>
						<option value="10">10 дней</option>
						<option value="11">11 дней</option>
						<option value="12">12 дней</option>
						<option value="13">13 дней</option>
						<option value="14">14 дней</option>
						<option value="15">15 дней</option>
					</select>
				</div>

				<div class="search__group-item">
					<select name="durationTo" class="search__select search__duration search__duration--to">
						<option value="" selected>До</option>
						<option value="0">Любая</option>
						<option value="1">1 день</option>
						<option value="2">2 дня</option>
						<option value="3">3 дня</option>
						<option value="4">4 дня</option>
						<option value="5">5 дней</option>
						<option value="6">6 дней</option>
						<option value="7">7 дней</option>
						<option value="8">8 дней</option>
						<option value="9">9 дней</option>
						<option value="10">10 дней</option>
						<option value="11">11 дней</option>
						<option value="12">12 дней</option>
						<option value="13">13 дней</option>
						<option value="14">14 дней</option>
						<option value="15">15 дней</option>
					</select>
				</div>
			</div>
		</div>

		<div class="searchItemDuration search__field search__field_duration col-12 col-sm-6 col-md-3">
			<div class="search__label">Даты тура, с - по</div>
			<input name="dates" class="search__input search__date js-search__date" autocomplete="off">
		</div>

		<div class="searchItemDuration search__field search__field_duration col-12 col-sm-6 col-md-2">
			<div class="search__label">Цена</div>
			<div class="search__group">
				<div class="search__group-item">
					<input name="priceFrom" class="search__input search__price search__price--from" placeholder="От">
				</div>

				<div class="search__group-item">
					<input name="priceTo" class="search__input search__price search__price--to" placeholder="До">
				</div>
			</div>

			<div class="search__field_submit">
				<input type="hidden" value="1" name="run">
				<div class="search__submit-wr">
					<input type="submit" class="search__submit" value="Найти">
				</div>
			</div>
		</div>
	</div>
</form>';$c['toursItem-fullwidth']='<!-- item-->
<div class="col-12 col-sm-6 col-md-4 col-lg-3">
<div class="ex__item">
	<div class="ex-card__wr">
		<div class="ex-card__img-wr">
			<a href="/[~[+id+]~]" class="ex-card__wr-link"><img title="[+pagetitle+]" alt="[+pagetitle+]" class="ex-card__img" src="/[[phpthumb? &input=`[[getImgFromGallery? &id=`[+id+]`]]` &options=`w=292,h=195,q=85,zc=1`]]"></a>
		</div>
		
		[[if? &is=`[+tv.duration+]||notempty` &separator=`||` &then=`<div class="ex-card__nearest">[+tv.duration+]</div>`]]

		<div class="ex-card__info">
			<h3 class="ex-card__title"><a href="/[~[+id+]~]" class="ex-card__link" title="[+pagetitle+]">[[TruncateString? &text=`[+pagetitle+]` &limit=`60`]]</a></h3>
			
			[[if? &is=`[+tv.route+]||notempty` &then=`<div class="ex-card__duration">Маршрут: [+tv.route+]</div>` &separator=`||`]]
			<div class="ex-card__desc">[+introtext+]</div>
			
			<div class="ex-card__price-wr clr">
				[[if? &is=`[+tv.price+]||notempty` &then=`<div class="ex-card__price">от [+tv.price+] [+tv.priceLabel+]</div>` &separator=`||`]]
				<a href="/[~[+id+]~]" class="btn ex-card__btn btn--middle">Подробнее</a>
			</div>
		</div>
	</div>
</div>
</div>
<!-- /item-->
';$c['ORDER-TOUR']='<div class="block__header">Заявка на тур</div>
<form method="post" action="/form/" class="b-form form_tour js-form-submit">			
	
	<input name="form" type="hidden" value="order-tour">
	<input type="text" name=\'name\' class="dn" value="">
	<input type="text" name=\'phone\' class="dn form__protect"  value="">
	<input type="hidden" name=\'page_id\' value="[*id*]">
	<input type="hidden" name=\'url\' value="[(site_url)][~[*id*]~]">
	<input type="hidden" name=\'pagetitle\' value=\'[*pagetitle*]\'>
	<div class="form__row clr">
		<label for="form-n"  class="form__label">Ваше имя</label>
		<div class="form__field">
			<input type="text" name="n" id="form-n"  value="" required class="form__input">
		</div>
	</div>
	<div class="form__row clr">
		<label for="form-t"  class="form__label">Ваш телефон</label>
		<div class="form__field">
			<input type="text" name="t" id="form-t"  value="" required class="phonemask form__input">
		</div>
	</div>
	<div class="form__row clr">
		<label for="form-m"  class="form__label">Пожелания к туру</label>
		<div class="form__field">
			<textarea name="m" id="form-m" class="form__textarea"></textarea>
		</div>
	</div>
	<div class="form__row  clr ">
		<div class="form__field">
			<label class="form__label agreement__label">Подтверждаю согласие на <a href="/[~70~]" target="_blank">обработку персональных данных</a>
				<input type="checkbox" value="1" name="agr" class="form__checkbox agreement__checkbox" checked="checked" required>
			</label>
		</div>
	</div> 
	<div class="form__row clr">
		<div class="form__label">&nbsp;</div>
		<div class="form__field">
			<button type="submit" name="submit" class="btn form__submit form_tour_submit">Отправить</button>
		</div>
	</div>
</form>
<div class="form__success">Ваша заявка успешно отправлена.<br>Наши менеджеры свяжутся с Вами.</div>
<div class="form__error">Произошла ошибка,<br>попробуйте еще раз!</div>


';$c['whyTpl']='<div class="col-12 col-sm-6 col-md-3 why__item">
	<img class="why__item-img" src="[[phpthumb? &input=`[+image+]` &options=`w=88,h=88,q=99,ZC=1`]]" alt="[+title+]"/>		
	<div class="why__title">[+title+]</div>
	<div class="why__text">[+text+]</div>
</div>';$c['faqTpl']='<li>
	<a>[+qwestion+]</a>
	<p class="answer">[+answer+]</p>	
</li>';$c['videoTpl']='<div class="video-item">		
	<a data-fancybox="video-gallery" href="[+video+]" class="video-item-link">
		<img src="//img.youtube.com/vi/[[GetIdYoutube? &id=`[+video+]`]]/mqdefault.jpg" class="video-item-image">
	</a>		
	<div class="video-item-title">[+title+]</div>
</div>';$s=&$this->snippetCache;$s['DLCrumbs']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLCrumbs.php\';';$s['DLCrumbsProps']='{"prefix":"client_"}';$s['DLMenu']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLMenu.php\';';$s['DLMenuProps']='{"prefix":"client_"}';$s['DLSitemap']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLSitemap.php\';';$s['DLSitemapProps']='{"prefix":"client_"}';$s['DocInfo']='return require MODX_BASE_PATH.\'assets/snippets/docinfo/snippet.docinfo.php\';';$s['DocInfoProps']='{"prefix":"client_"}';$s['DocLister']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DocLister.php\';';$s['DocListerProps']='{"prefix":"client_"}';$s['FormLister']='return require MODX_BASE_PATH.\'assets/snippets/FormLister/snippet.FormLister.php\';';$s['FormListerProps']='{"prefix":"client_"}';$s['if']='return require MODX_BASE_PATH.\'assets/snippets/if/snippet.if.php\';';$s['ifProps']='{"prefix":"client_"}';$s['phpthumb']='return require MODX_BASE_PATH.\'assets/snippets/phpthumb/snippet.phpthumb.php\';';$s['phpthumbProps']='{"prefix":"client_"}';$s['summary']='return require MODX_BASE_PATH.\'assets/snippets/summary/snippet.summary.php\';';$s['summaryProps']='{"prefix":"client_"}';$s['sgController']='return require MODX_BASE_PATH.\'assets/snippets/simplegallery/sgController.php\';';$s['sgControllerProps']='{"prefix":"client_"}';$s['sgLister']='return require MODX_BASE_PATH.\'assets/snippets/simplegallery/sgLister.php\';';$s['sgListerProps']='{"prefix":"client_"}';$s['sgThumb']='return require MODX_BASE_PATH.\'assets/snippets/simplegallery/sgThumb.php\';';$s['sgThumbProps']='{"prefix":"client_"}';$s['multiTV']='return require MODX_BASE_PATH . \'assets/tvs/multitv/multitv.snippet.php\';';$s['multiTVProps']='{"prefix":"client_"}';$s['JotX']='return require MODX_BASE_PATH.\'assets/snippets/jot/snippet.jot.php\';';$s['JotXProps']='{"prefix":"client_"}';$s['UltimateParent']='return require MODX_BASE_PATH.\'assets/snippets/ultimateparent/snippet.ultimateparent.php\';';$s['UltimateParentProps']='{"prefix":"client_"}';$s['DLPrevNext']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLPrevNext.php\';';$s['DLPrevNextProps']='{"prefix":"client_"}';$s['DLTemplate']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLTemplate.php\';';$s['DLTemplateProps']='{"prefix":"client_"}';$s['DLGlossary']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLGlossary.php\';';$s['DLGlossaryProps']='{"prefix":"client_"}';$s['DLBeforeAfter']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLBeforeAfter.php\';';$s['DLBeforeAfterProps']='{"prefix":"client_"}';$s['DDocInfo']='$id = isset($id) ? (int)$id : $modx->documentObject[\'id\'];
$field = isset($field) ? (string)$field : \'id\';
if($field == \'id\'){
    $out = $id;
}else{
    if($modx->documentObject[\'id\'] == $id){
        $out = isset($modx->documentObject[$field]) ? $modx->documentObject[$field] : \'\';
        if(is_array($out)){
           $out = isset($out[1]) ? $out[1] : \'\';
        }
    }else{
        $out = $modx->doc->edit($id)->get($field);
    }
}
return (string)$out;';$s['DDocInfoProps']='{"prefix":"client_"}';$s['DLReflectFilter']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLReflectFilter.php\';';$s['DLReflectFilterProps']='{"prefix":"client_"}';$s['DLValuelist']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLValuelist.php\';';$s['DLValuelistProps']='{"prefix":"client_"}';$s['DLReflect']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLReflect.php\';';$s['DLReflectProps']='{"prefix":"client_"}';$s['aDate']='//пример: [[aDate? &date=`[*createdon*]` &date2=`[*pub_date*]`]]
/**
**  $date - дата для использования
**  $date2 - запасная дата
**	$short - вставить короткое имя месяца
**	$outFormat - шаблон вывода даты, строка для замены %d%, %m%, %y%
**/
if(!defined(\'MODX_BASE_PATH\')){die(\'What are you doing? Get out of here!\');}
$output = $return = "";
$format = "%d.%m.%Y";
$fullMonth = array(\'1\' => \'января\',
					\'2\' => \'февраля\',
					\'3\' => \'марта\',
					\'4\' => \'апреля\',
					\'5\' => \'мая\',
					\'6\' => \'июня\',
					\'7\' => \'июля\',
					\'8\' => \'августа\',
					\'9\' => \'сентября\',
					\'10\' => \'октября\',
					\'11\' => \'ноября\',
					\'12\' => \'декабря\');
$shortMonth = array(\'1\' => \'янв\',
					\'2\' => \'фев\',
					\'3\' => \'мар\',
					\'4\' => \'апр\',
					\'5\' => \'мая\',
					\'6\' => \'июн\',
					\'7\' => \'июл\',
					\'8\' => \'авг\',
					\'9\' => \'сен\',
					\'10\' => \'окт\',
					\'11\' => \'ноя\',
					\'12\' => \'дек\');
if (isset($date2) && $date2>0 ) {
    $output = strftime($format,$date2);
}
else{
    $output = strftime($format,$date);
}

$date=explode(".", $output);
$month = (int)$date[1];
if ( isset($short) ){
    $m = $shortMonth[$month];
}
else {
    $m = $fullMonth[$month];
}
if( isset( $outFormat ) ) {
	$searchArray = array("%d%", "%m%", "%y%");
	$replaceArray = array($date[0], $m, $date[2]);
	$return = str_replace($searchArray, $replaceArray, $outFormat);
}
else
	$return = $date[0].\'&nbsp;\'.$m.\'&nbsp;\'.$date[2];
return $return;';$s['TruncateString']='$limit = $limit?$limit:100;
if (mb_strlen($text, \'utf-8\') >= $limit) {
    $text = mb_substr($text, 0, $limit - 5, \'utf-8\').\'...\';
}
return $text;';$s['nl2br']='if ($data) {
	return nl2br($data);
} else {
	return false;
}';$s['menuTopCountry']='if($data[\'parent\']==5){
	$data[\'_renderRowTpl\']=\'@CODE:<li class="[+classNames+] nav-top__subitem_country"><a href="[+url+]"><span class="nav__flag fl-[+tv.countryID+]"></span><span>[+title+]</span></a></li>\';
}

if($data[\'id\']==5){
	$data[\'_renderRowTpl\']=\'@CODE:<li class="[+classNames+] nav-top__col-3"><a href="[+url+]">[+title+]</a><div class="nav-top__wr">[+wrap+]<div class="nav-top__allcountry"><a href="/[~5~]" class="nav-top__link">Все страны</a></div></div><i class="nav-top__icon js-nav-top__toggle-item"><svg class="icn icn-ui-chevron-down"><use xlink:href="/template/svg/icons.svg#icn-ui-chevron-down"></use></svg></i></li>\';
}

return $data;';$s['setCountryPlaceholders']='/*
* Необходимо вызвать сниппет в Стране или её дочерних страницах. Будут доступны плейсхоолдеры
* [+country.id+] - id документа страны
* все поля таблицы evo_countries: [+country.name+] - Название страны и т.д.
*/
$id=$modx->documentIdentifier;
$countryId=\'\';
if ($modx->documentObject[\'parent\']==5) {
	$code=$modx->documentObject[\'countryID\'][1];
} else {
	//Получаем код страны из родителя 2 уровня от корня
	$parentsArr=$modx->getParentIds($id);
	$level=count($parentsArr);
	if ($level>=2){
		array_pop($parentsArr);
		$countryId=array_pop($parentsArr);
	}
	
	$code=$modx->getTemplateVar(\'countryID\', \'*\', $countryId);
	$code=$code[\'value\'];
}


$modx->setPlaceholder(\'country.id\',$countryId?$countryId:$id);

$sql=$modx->db->query("SELECT * FROM ".$modx->getFullTableName("countries")." WHERE code=\'".$code."\'");

if($modx->db->getRecordCount($sql)==1){
	$row = $modx->db->getRow($sql);
		foreach($row as $k=>$val){
		$modx->setPlaceholder(\'country.\'.$k,$val);
	}
	
		
}';$s['getImgFromGallery']='$id=(isset($id)?trim($id):0);				// id галереи
$index=(isset($index)?$index:1); 	// порядковый номер картинки
$noimage=(isset($noimage)?$noimage:\'\');	// 

$index--;

$rs=$modx->db->select(\'*\', $modx->getFullTableName(\'sg_images\'), "sg_rid=\'$id\' AND sg_isactive=1 ORDER BY sg_index ASC ");

if ($modx->db->getRecordCount($rs) > 0) {
	$images=array();
	while($row = $modx->db->getRow($rs)){
		$images[] = $row[\'sg_image\'];
	}

	if(isset($images[$index])){
			return $images[$index];
	} else {
		return $noimage;	
	}
} else {
	return $noimage;
}';$s['SletatSearch']='$cityId=832; /*TODO + color theme*/
	
	
$tpl=\'
<script src="http://ui.sletat.ru/module-5.0/app.js"></script>
<script>
sletat.createModule5("Search", {
	files   : ["//ui.sletat.ru/module-5.0/theme/[(client_theme)]_dec2015.min.css"],
	country : [+country.sletat_code+],
	city: \'.$cityId.\',
	useCard : false
});
</script>
\';

return $tpl;';$s['CURRENCY-CB']='if( ! ini_get(\'date.timezone\') )
{
    date_default_timezone_set(\'GMT\');
}

$date=date(\'d.m.y\');
$xmlURL = \'http://www.cbr.ru/scripts/XML_daily.asp\';/*?date_req=\'.date(\'d/m/Y\');*/
$tpl_default=\'
<div class="currency">
<table class="currency__table">
	<tbody>
		<tr>
			<td class="currency__label">USD/RUB</td><td class="currency__value">[+usd+]</td>
		</tr>
		<tr>
			<td class="currency__label">EUR/RUB</td><td class="currency__value">[+euro+]</td>
		</tr>
	</tbody>
</table>
</div>
\';

$tpl = isset($tpl) ? $modx->getChunk($tpl) : $tpl_default;

//кэширование 3 часа
$filename = MODX_BASE_PATH.\'assets/cache/kurs.xml\';
if (!file_exists($filename) || (file_exists($filename) && time() > filemtime($filename) + 60*60*3)) {
        $file = @file_get_contents($xmlURL);
        if ($file) {
                file_put_contents($filename, $file);
                @chmod($filename, 0666);
        }
}

$xml = @simplexml_load_file($filename); 
if ($xml !== false){
        $usd = $xml->xpath(\'Valute[@ID="R01235"]/Value\');
        $usd = round(str_replace(\',\',\'.\',$usd[0]),2);
        $euro = $xml->xpath(\'Valute[@ID="R01239"]/Value\');
        $euro = round(str_replace(\',\',\'.\',$euro[0]),2);
		$pound = $xml->xpath(\'Valute[@ID="R01035"]/Value\');
        $pound = round(str_replace(\',\',\'.\',$pound[0]),2);
        $output = str_replace(array(\'[+usd+]\',\'[+euro+]\', \'[+gbp+]\', \'[+date+]\'),array($usd,$euro,$pound,$date),$tpl);
        return $output;
}';$s['getCountryHotels']='if (isset($country)) {
	require ($_SERVER[\'DOCUMENT_ROOT\'].\'/scripts/rn-best-prices/config.php\');
	if (isset($hotelsInBase[$country]))
		return $hotelsInBase[$country];
	else
		return "Тысячи отелей";
		
}';$s['cl-getParam']='if ($param && isset($_GET[$param]) && !empty($_GET[$param])) {
	$data = json_decode($data);
	$d = $data->fieldValue;
	foreach($d as $row) {
		if ($row->param == $param && $row->pvalue == $_GET[$param]) {
			return $row->value;
		}
	}
}
if ($noResult)
	return $noResult;
else 
	return false;';$s['cl-reviews']='$id = $modx->documentIdentifier;
	
	$reviewsDB = $modx->db->query("
SELECT c.id,c.content,c.longtitle,c.createdon,c.editedon,
GROUP_CONCAT(tv.value SEPARATOR \'|\') AS tvv,
GROUP_CONCAT(tvn.name SEPARATOR \'|\') AS tvn 
FROM {$modx->db->config[\'table_prefix\']}site_content AS c 
LEFT JOIN {$modx->db->config[\'table_prefix\']}site_tmplvar_contentvalues AS tv ON tv.contentid = c.id
LEFT JOIN {$modx->db->config[\'table_prefix\']}site_tmplvars AS tvn ON tvn.id = tv.tmplvarid  
WHERE c.parent=84 AND c.published = 1 AND c.id IN (
SELECT c.id FROM {$modx->db->config[\'table_prefix\']}site_content AS c LEFT JOIN {$modx->db->config[\'table_prefix\']}site_tmplvar_contentvalues AS tv ON tv.contentid = c.id WHERE tv.tmplvarid=29 AND (tv.value = $id OR tv.value = 0)
)
GROUP BY c.id 
ORDER BY c.menuindex ASC, c.editedon DESC
	");

	$reviews=Array();
	while( $row = $modx->db->getRow( $reviewsDB ) ) {  

		$reviews[$row[\'id\']] = Array(
			\'id\'=>$row[\'id\'],
			\'longtitle\'=>$row[\'longtitle\'],
			\'content\'=>$row[\'content\'],
		);
		/*if ($row[\'editedon\']) {
			$reviews[$row[\'id\']][\'date\'] = $row[\'editedon\'];
		} else {
			$reviews[$row[\'id\']][\'date\'] = $row[\'createdon\'];
		}*/
		$tvn = explode(\'|\',$row[\'tvn\']);
		$tvv = explode(\'|\',$row[\'tvv\']);
		foreach ($tvn as $k=>$v) {
			$reviews[$row[\'id\']][$v] = $tvv[$k];
		}
	}
/*echo \'<pre>\';
var_dump($reviews);
echo \'</pre>\';*/
	if ($reviews) :
?>
<div class="client_feedbacks" screen="3">
	<div class="client_feedbacks__inside">
		<h2 class="client_title">Более 1172 довольных клиентов</h2>
		<div class="wrapper">
			<div class="feedbacks">
				<?php
				foreach ($reviews as $r) {
					echo $modx->parseChunk(\'small-review\', $r, \'[+\', \'+]\');
				}
				?>
			</div>
		</div>
	</div>        
</div>
<? endif;';$s['rn-best-prices']='$classPath = $_SERVER[\'DOCUMENT_ROOT\'] . \'/scripts/rn-best-prices/class.provider.php\';
if (!file_exists($classPath)) {
	echo "Проверьте файл провайдера туров";
	return false;
}
	
include_once $classPath;
$Provider = new Provider($modx);

$rid = $modx->documentIdentifier;
$cards = $Provider->getCards(Array(\'rid\'=>$rid));

$modx->setPlaceholder(\'resortOptions\',$Provider->getStoredResortsName(true));

if (is_array($cards) && count($cards)) :
?>
<div class="wrapper">
        <div class="best-price" screen="1">
            <h2>Лучшие цены</h2>
            <div class="best-offers clearfix">
				<?php foreach ($cards as $c) : ?>
				<div class="card">
                    <div class="best-offers__best-offer">
                        <div class="best-offers__img">
							<img src="<?=$c[\'img\']?>" />
                        </div>
                        <div class="best-offers__title mainColor"><?=$c[\'rname\']?></div>
                        <div class="variants">
							<?php foreach ($c[\'hotels\'] as $star => $price) : ?>
                            <div class="variants__var">Отель <?=$star?>* <span class=\'grey\'>от</span> <span class="variants__price"><?=number_format(ceil($price), 0, \',\', \' \')?></span> <span class=\'grey\'>руб 10 дн 1 чел</span></div>
							<?php endforeach; ?>
                        </div>
                        <div class="best-offers__depart mainColor2">Вылет завтра</div>
                        <div class="tour-button get-tour">Подобрать тур</div>
                    </div>
                </div>
                <?php endforeach; ?>
            </div>
        </div>
    </div>
<?php
elseif (!empty($cards)):?>
<!-- <?=$cards?> -->
<?php
endif;';$s['tourvisorSearch']='$showDefault = is_numeric($showDefault) ? $showDefault : false;

$sletatCountries = Array(
	"Египет" => 1,
	"Таиланд" => 2,
	"Индия" => 3,
	"Турция" => 4,
	"Тунис" => 5,
	"Греция" => 6,
	"Индонезия" => 7,
	"Мальдивы" => 8,
	"ОАЭ" => 9,
	"Куба" => 10,
	"Доминикана" => 11,
	"Шри Ланка" => 12,
	"Китай" => 13,
	"Испания" => 14,
	"Кипр" => 15,
	"Вьетнам" => 16,
	"Андорра" => 17,
	"Мексика" => 18,
	"Чехия" => 19,
	"Болгария" => 20,
	"Черногория" => 21,
	"Хорватия" => 22,
	"Марокко" => 23,
	"Италия" => 24,
	"Сингапур" => 25,
	"Филиппины" => 26,
	"Маврикий" => 27,
	"Сейшелы" => 28,
	"Иордания" => 29,
	"Израиль" => 30,
	"Австрия" => 31,
	"Франция" => 32,
	"Ямайка" => 33,
	"Финляндия" => 34,
	"Португалия" => 35,
	"Малайзия" => 36,
	"Венгрия" => 37,
	"Германия" => 38,
	"Бразилия" => 39,
	"Камбоджа" => 40,
	"Танзания" => 41,
	"Словакия" => 42,
	"Словения" => 43,
	"Великобритания" => 44,
	"Нидерланды" => 45,
	"Абхазия" => 46,
	"Россия" => 47,
	"США" => 48,
	"Япония" => 49,
	"Мальта" => 50,
	"Кения" => 51,
	"Швейцария" => 52,
	"Армения" => 53,
	"Грузия" => 54,
	"Азербайджан" => 55,
	"Узбекистан" => 56,
	"Беларусь" => 57,
	"Сербия" => 58
);
$from=Array( // agency-city TV => tourvisor from id
	1357 => 53,
	1275 => 29,
	1292 => 40,
	1305 => 25,
	1306 => 32,
	1331 => 36,
	1293 => 23,
	1279 => 27,
	1283 => 26,
	1264 => 5,
	1265 => 3,
	1375 => 64,
	1285 => 22,
	1266 => 10,
	1280 => 17,
	1282 => 15,
	1270 => 11,
	1281 => 12,
	1288 => 48,
	832 => 1,
	1307 => 24,
	1333 => 43,
	1268 => 8,
	1284 => 30,
	1298 => 34,
	1289 => 19,
	1299 => 39,
	1341 => 16,
	1267 => 9,
	1353 => 67,
	1278 => 21,
	1290 => 28,
	1336 => 65,
	1276 => 2,
	1269 => 18,
	1271 => 7,
	1300 => 31,
	1326 => 62,
	1291 => 56,
	1355 => 55,
	1294 => 13,
	1296 => 41,
	1301 => 52,
	1273 => 14,
	1295 => 50,
	1274 => 4,
	1286 => 20,
	1297 => 35,
	1303 => 51,
	1272 => 6,
	1352 => 44,
	1332 => 37,
);
if (is_numeric($country)) {
	$c = $modx->runSnippet(
		"GetField",
		array(
			\'docid\'=>$country,
			\'field\'=>\'pagetitle\',
		)
	);
} elseif (is_string($country) && strlen($country) > 0) {
	$c = $country;
}
if ($c) {
	$id = $sletatCountries[$c];
} 
if (empty($id)) { // регион
	$c = $modx->runSnippet(
		"GetField",
		array(
			\'parent\'=>1,
			\'topid\'=>5,
		   	\'field\'=>\'pagetitle\',
		)
	);
	$id = $sletatCountries[$c];
}
if (empty($id) && $showDefault!==false) { // на случай если ничего не нашлось - Россия
	if ($showDefault==0)
		$id = 47;
	else 
		$id = $showDefault;
}

$f = 832;
$f = $f[\'agency-city\'];
if (is_numeric($f)) {
	$f = $from[$f];
	if (!is_numeric($f))
		$f = 1;	// Москва	
} else {
	$f = 1;	
}	
if (isset($id) && is_numeric($id)) :
?>
<div class="tv-search-form" tv-type="2" tv-width="auto" tv-departure="<?=$f?>" tv-country="<?=$id?>"></div>
<script type="text/javascript" src="//tourvisor.ru/module/init.js"></script>
<?php
endif;
/* TourVisor ids
	$a = Array(
"Без перелета" => 99,
"Абакан" => 53,
"Архангельск" => 29,
"Астрахань" => 40,
"Барнаул" => 25,
"Белгород" => 32,
"Благовещенск" => 36,
"Владивосток" => 23,
"Волгоград" => 27,
"Воронеж" => 26,
"Екатеринбург" => 3,
"Ижевск" => 64,
"Иркутск" => 22,
"Казань" => 10,
"Калининград" => 17,
"Кемерово" => 15,
"Краснодар" => 11,
"Красноярск" => 12,
"Магнитогорск" => 48,
"Мин.Воды" => 39,
"Москва" => 1,
"Мурманск" => 30,
"Н.Новгород" => 8,
"Нижневартовск" => 34,
"Нижнекамск" => 19,
"Новокузнецк" => 16,
"Новосибирск" => 9,
"Новый Уренгой" => 67,
"Омск" => 21,
"Оренбург" => 28,
"П.Камчатский" => 43,
"Пенза" => 65,
"Пермь" => 2,
"Ростов-на-Дону" => 18,
"С.Петербург" => 5,
"Самара" => 7,
"Саратов" => 31,
"Симферополь" => 62,
"Сочи" => 56,
"Ставрополь" => 55,
"Сургут" => 13,
"Сыктывкар" => 41,
"Томск" => 52,
"Тюмень" => 14,
"Ульяновск" => 50,
"Уфа" => 4,
"Хабаровск" => 20,
"Ханты-Мансийск" => 35,
"Чебоксары" => 51,
"Челябинск" => 6,
"Чита" => 44,
"Ю.Сахалинск" => 24,
"Якутск" => 37,
);
*/';$s['reformDate']='if ($date) {
	if (empty($format)) {
		$format = \'d.m.Y\';
	}
	if (!is_numeric($date)) {
		$date = strtotime($date);
	}
	return date($format, $date);
}';$s['formSelectOptions']='if($options) {
	$html = \'\';
	$options = explode(\',\',$options);
	foreach ($options as $o){
		$html .= "<option value=\'$o\'>$o</option>";
	}
	return $html;
} else {
	return false;
}';$s['tourvisorHotTours']='$showDefault = is_numeric($showDefault) ? $showDefault : false;

$sletatCountries = Array(
	"Египет" => 1,
	"Таиланд" => 2,
	"Индия" => 3,
	"Турция" => 4,
	"Тунис" => 5,
	"Греция" => 6,
	"Индонезия" => 7,
	"Мальдивы" => 8,
	"ОАЭ" => 9,
	"Куба" => 10,
	"Доминикана" => 11,
	"Шри Ланка" => 12,
	"Китай" => 13,
	"Испания" => 14,
	"Кипр" => 15,
	"Вьетнам" => 16,
	"Андорра" => 17,
	"Мексика" => 18,
	"Чехия" => 19,
	"Болгария" => 20,
	"Черногория" => 21,
	"Хорватия" => 22,
	"Марокко" => 23,
	"Италия" => 24,
	"Сингапур" => 25,
	"Филиппины" => 26,
	"Маврикий" => 27,
	"Сейшелы" => 28,
	"Иордания" => 29,
	"Израиль" => 30,
	"Австрия" => 31,
	"Франция" => 32,
	"Ямайка" => 33,
	"Финляндия" => 34,
	"Португалия" => 35,
	"Малайзия" => 36,
	"Венгрия" => 37,
	"Германия" => 38,
	"Бразилия" => 39,
	"Камбоджа" => 40,
	"Танзания" => 41,
	"Словакия" => 42,
	"Словения" => 43,
	"Великобритания" => 44,
	"Нидерланды" => 45,
	"Абхазия" => 46,
	"Россия" => 47,
	"США" => 48,
	"Япония" => 49,
	"Мальта" => 50,
	"Кения" => 51,
	"Швейцария" => 52,
	"Армения" => 53,
	"Грузия" => 54,
	"Азербайджан" => 55,
	"Узбекистан" => 56,
	"Беларусь" => 57,
	"Сербия" => 58
);
$from=Array( // agency-city TV => tourvisor from id
	1357 => 53,
	1275 => 29,
	1292 => 40,
	1305 => 25,
	1306 => 32,
	1331 => 36,
	1293 => 23,
	1279 => 27,
	1283 => 26,
	1264 => 5,
	1265 => 3,
	1375 => 64,
	1285 => 22,
	1266 => 10,
	1280 => 17,
	1282 => 15,
	1270 => 11,
	1281 => 12,
	1288 => 48,
	832 => 1,
	1307 => 24,
	1333 => 43,
	1268 => 8,
	1284 => 30,
	1298 => 34,
	1289 => 19,
	1299 => 39,
	1341 => 16,
	1267 => 9,
	1353 => 67,
	1278 => 21,
	1290 => 28,
	1336 => 65,
	1276 => 2,
	1269 => 18,
	1271 => 7,
	1300 => 31,
	1326 => 62,
	1291 => 56,
	1355 => 55,
	1294 => 13,
	1296 => 41,
	1301 => 52,
	1273 => 14,
	1295 => 50,
	1274 => 4,
	1286 => 20,
	1297 => 35,
	1303 => 51,
	1272 => 6,
	1352 => 44,
	1332 => 37,
);
if (is_numeric($country)) {
	$c = $modx->runSnippet(
		"GetField",
		array(
			\'docid\'=>$country,
			\'field\'=>\'pagetitle\',
		)
	);
} elseif (is_string($country) && strlen($country) > 0) {
	$c = $country;
}
if ($c) {
	$id = $sletatCountries[$c];
} 
if (empty($id)) { // регион
	$c = $modx->runSnippet(
		"GetField",
		array(
			\'parent\'=>1,
			\'topid\'=>5,
		   	\'field\'=>\'pagetitle\',
		)
	);
	$id = $sletatCountries[$c];
}
if (empty($id) && $showDefault!==false) { // на случай если ничего не нашлось - Россия
	if ($showDefault==0)
		$id = 47;
	else 
		$id = $showDefault;
}

$f = 832;
$f = $f[\'agency-city\'];
if (is_numeric($f)) {
	$f = $from[$f];
	if (!is_numeric($f))
		$f = 1;	// Москва	
} else {
	$f = 1;	
}
if (isset($id) && is_numeric($id)) :
?>
<div class="tv-hot-tours tv-moduleid-943010" tv-departure="<?=$f?>" tv-countries="<?=$id?>"></div>
<script type="text/javascript" src="//tourvisor.ru/module/init.js"></script>
<?php
endif;
/* TourVisor ids
	$a = Array(
"Без перелета" => 99,
"Абакан" => 53,
"Архангельск" => 29,
"Астрахань" => 40,
"Барнаул" => 25,
"Белгород" => 32,
"Благовещенск" => 36,
"Владивосток" => 23,
"Волгоград" => 27,
"Воронеж" => 26,
"Екатеринбург" => 3,
"Ижевск" => 64,
"Иркутск" => 22,
"Казань" => 10,
"Калининград" => 17,
"Кемерово" => 15,
"Краснодар" => 11,
"Красноярск" => 12,
"Магнитогорск" => 48,
"Мин.Воды" => 39,
"Москва" => 1,
"Мурманск" => 30,
"Н.Новгород" => 8,
"Нижневартовск" => 34,
"Нижнекамск" => 19,
"Новокузнецк" => 16,
"Новосибирск" => 9,
"Новый Уренгой" => 67,
"Омск" => 21,
"Оренбург" => 28,
"П.Камчатский" => 43,
"Пенза" => 65,
"Пермь" => 2,
"Ростов-на-Дону" => 18,
"С.Петербург" => 5,
"Самара" => 7,
"Саратов" => 31,
"Симферополь" => 62,
"Сочи" => 56,
"Ставрополь" => 55,
"Сургут" => 13,
"Сыктывкар" => 41,
"Томск" => 52,
"Тюмень" => 14,
"Ульяновск" => 50,
"Уфа" => 4,
"Хабаровск" => 20,
"Ханты-Мансийск" => 35,
"Чебоксары" => 51,
"Челябинск" => 6,
"Чита" => 44,
"Ю.Сахалинск" => 24,
"Якутск" => 37,
);
*/';$s['getCheckBoxList']='/*
parent - id родителей
name - name чекбоксов

*/

$templateGuide=\'6,10\'; # id шаблона категории туров

if(isset($parent)){

	$html=\'\';
	
# Выборка категорий туров по всем регионам	
$tbl_site_content = $modx->getFullTableName(\'site_content\');	
$rs=$modx->db->query("SELECT id,pagetitle FROM {$tbl_site_content} WHERE template IN(".$templateGuide.") AND parent =".$parent."  AND published=1 AND deleted=0 AND hidemenu=0 ORDER BY menuindex");

$typeArr=array();
if ($modx->db->getRecordCount($rs) > 0) {
	while($row = $modx->db->getRow($rs)){
		$checked=\'\';
		if(isset($_GET[$name]) && is_array($_GET[$name])  && in_array($row[\'id\'], $_GET[$name]) ) {
			$checked=\'checked="checked"\';
			
		}
		$html.=\'<li class="checkbox-list__item"><input type="checkbox" name="\'.$name.\'[]" value="\'.$row[\'id\'].\'" class="checkbox-list__checkbox" id="field-\'.$row[\'id\'].\'" \'.$checked.\'><label class="checkbox-list__title" for="field-\'.$row[\'id\'].\'">\'.$row[\'pagetitle\'].\'</label></li>\';
	}
}

return $html;

}';$s['tourSearch']='$parents=\'5\'; //корни справочников туров по умолчанию


function fieldCallback($t){
    return intval($t);
}

function tvToCondition( $tvName, $operand, $value){
	return $value?\';tv:\'.$tvName.\':\'.$operand.\':\'.$value:\'\';
}


if(isset($_GET[\'run\'])){ //запущен поиск?
	
	$tourRegion=(isset($_GET[\'region\'])?$_GET[\'region\']:\'\');
	$tourType=(isset($_GET[\'tourType\'])?$_GET[\'tourType\']:\'\');
	$date=(isset($_GET[\'dates\'])?$_GET[\'dates\']:\'\');
	$durationFrom=(isset($_GET[\'durationFrom\'])?$_GET[\'durationFrom\']:\'\');
	$durationTo=(isset($_GET[\'durationTo\'])?$_GET[\'durationTo\']:\'\');
	$priceFrom=(isset($_GET[\'priceFrom\'])?$_GET[\'priceFrom\']:\'\');
	$priceTo=(isset($_GET[\'priceTo\'])?$_GET[\'priceTo\']:\'\');	

	$datePeriods=(isset($_GET[\'datePeriods\'])?1:0);
	
	
	//Приводим данные к целочисленному типу
	//settype($tourRegion, \'integer\');
	settype($durationFrom, \'integer\');
	settype($durationTo, \'integer\');
	settype($priceFrom, \'integer\');
	settype($priceTo, \'integer\');
	
	
	
	# поиск по параметрам
	$filter=\'\';
	$filterPeriods=\'\';
	$filterType=\'\';
	
	# формируем фильтр по параметрам продолжительность, цена
	$filter=tvToCondition(\'duration\', \'>=\', $durationFrom)
		.tvToCondition(\'duration\', \'<=\', $durationTo)
		.tvToCondition(\'price\', \'>=\', $priceFrom)
		.tvToCondition(\'price\', \'<=\', $priceTo);
	
	

	# типы туров
	
	if ($tourType){
		foreach($tourType as $item){
			$filterType.=tvToCondition(\'tourType\', \'=\', $item);
		}
		$filterType=\'OR(\'.trim($filterType, \';\').\')\';
	}	
	
	
	# формируем фильтр по дате и предварительный фильтр по переиодам дат
	/*
	if($datePeriods && $date){

		$dateArr=explode(\'.\', $date);
		$dateStart= mktime(0,0,0,$dateArr[1], $dateArr[0], $dateArr[2])-3*86400;
		for($i=0; $i<=6;$i++ ){
			$filterPeriods.=tvToCondition(\'dates\', \'%\', date(\'d.m.y\',$dateStart+86400*$i));
		}
		$filterPeriods=\'OR(\'.trim($filterPeriods, \';\').\')\';
		
	} else {
		$filter.=tvToCondition(\'dates\', \'%\', $date);
		
	}
	*/
	
	
	if($date){

		$date=explode(\' - \', $date);

		$dateArr=explode(\'.\', $date[0]);
		$dateStart= mktime(0,0,0,$dateArr[1], $dateArr[0], $dateArr[2]);

		$dateArr=explode(\'.\', $date[1]);
		$dateEnd= mktime(0,0,0,$dateArr[1], $dateArr[0], $dateArr[2]);

		$days=($dateEnd-$dateStart)/86400;

		for($i=0; $i<=$days;$i++ ){
			$filterPeriods.=tvToCondition(\'dates\', \'%\', date(\'d.m.Y\',$dateStart+86400*$i));
			//print_r(date(\'d.m.y\',$dateStart+86400*$i));echo "\\n";
		}
		$filterPeriods=\'OR(\'.trim($filterPeriods, \';\').\')\';
			
	}
	

	
	
	if($filter){
		$filter=\'AND(\'.trim($filter, \';\').\')\';
	}
	
	
	# склейка основного фильтра и фильтра по периодам дат
	/*
	if($filter && $filterPeriods){
		$filter=\'AND(\'.$filter.\';\'.$filterPeriods.\')\';
	} else if($filterPeriods){
		$filter=$filterPeriods;
	}
	*/
	
	$filters=array($filter, $filterType,$filterPeriods);
	$filter=implode(\';\', $filters);

	
	if($filter && count($filters)>1){
		$filter=\'AND(\'.trim($filter, \';\').\')\';
	}
		


	
	if($tourRegion){
		$parents=implode(",", $tourRegion);
	}


	echo \'<div class="b-excursion"><div class="ex__list row">\';
	echo $modx->runSnippet(\'DocLister\', array(

		\'id\'=>\'tours\',
		\'tvList\'=>\'route,duration,price,dates,priceLabel\',
		\'parents\'=>$parents,
		\'showParent\'=>0,
		\'debug\'=>$_GET[\'d\'],
		\'tpl\'=>\'toursItem-fullwidth\',
		\'depth\'=>\'3\',
		\'addWhereList\'=>\'isfolder=0 AND template=13\',
		\'orderBy\'=>\'parent ASC,menuindex ASC\',
		\'display\'=>\'21\',
		\'paginate\'=>\'1\',
		\'showPublishedOnly\'=>\'1\',

		\'noneTPL\'=>\'@CODE:<div class="col-12 search__nofound">Туры не найдены</div>\',

		\'filters\'=>$filter,
		//\'filters\'=>\'AND(AND(tv:duration:=:5);AND(tv:price:>=:13500);AND(tv:price:<=:20000);AND(tv:dates:%:07.09.17))\',
		
		\'TplNextP\'=>\'@CODE: <li class="pagination__item pagination__next"><a href="[+link+]">&rarr;</a></li>\',
		\'TplPrevP\'=>\'@CODE: <li class="pagination__item pagination__prev"><a href="[+link+]">&larr;</a></li>\',
		\'TplPage\'=>\'@CODE: <li class="pagination__item"><a href="[+link+]">[+num+]</a></li>\',
		\'TplCurrentPage\'=>\'@CODE: <li class="pagination__item active"><span href="[+link+]">[+num+]</span></li>\',
		\'TplWrapPaginate\'=>\'@CODE: <div class="pagination"><ul>[+wrap+]</ul></div>\'

		)
		);

		echo \'</div>[+tours.pages+]</div>\';	

}';$s['countriesCalendar']='// Параметры
if (!isset($elid))
	return false;
$display = (isset($display) && $display > 0 && is_numeric($display)) ? $display : 6;
$countryIdTv = 12;
$tourTypesRid = 161;
$month = (isset($month) && is_numeric($month) && $month > 0 && $month < 13) ? $month : false;
// $tourTypesChecked - алиасы типов отдыха через запятую
// phpthumb - настройка картинок

if ($month === false && isset($_COOKIE[\'CountriesCalendar_month\']))
{
	$month = $_COOKIE[\'CountriesCalendar_month\'];
}
else if ($month === false)
{
	$month = date(\'n\')-1;
}

// Получим список стран
/*
$result = $modx->db->query("
SELECT 
sc.id, sc.pagetitle,
ci.visa, ci.price_from, 
GROUP_CONCAT(DISTINCT sctt.alias ORDER BY sctt.id) AS tourTypes,
GROUP_CONCAT(DISTINCT m.months ORDER BY m.tour_type_id SEPARATOR \';\') AS tourTypesMonths,
ct.*,
sg.sg_image AS image
FROM ".$modx->getFullTableName(\'site_content\')." AS sc
LEFT JOIN ".$modx->getFullTableName(\'site_tmplvar_contentvalues\')." AS tcv ON tcv.contentid = sc.id
LEFT JOIN ".$modx->getFullTableName(\'countries_info\')." AS ci ON ci.code = tcv.value
LEFT JOIN ".$modx->getFullTableName(\'countries_temperature\')." AS ct ON ct.code = tcv.value
LEFT JOIN ".$modx->getFullTableName(\'countries_tour_types\')." AS ctt ON ctt.code = tcv.value
LEFT JOIN ".$modx->getFullTableName(\'site_content\')." AS sctt ON sctt.id = ctt.tour_type_id
LEFT JOIN (
SELECT code, tour_type_id, GROUP_CONCAT(month ORDER BY month) as months FROM ".$modx->getFullTableName(\'countries_tour_types\')." GROUP BY code, tour_type_id
) AS m ON m.code = tcv.value AND m.tour_type_id = sctt.id
LEFT JOIN ".$modx->getFullTableName(\'sg_images\')." AS sg ON sg.sg_rid = sc.id AND sg.sg_index = 0
WHERE
tcv.tmplvarid = $countryIdTv
GROUP BY sc.id
");
*/
$result = $modx->db->query("
SELECT 
sc.id, sc.pagetitle,
ci.visa, ci.price_from, 
GROUP_CONCAT(DISTINCT sctt.alias ORDER BY sctt.id) AS tourTypes,
m.tourTypesMonths,
ct.*,
sg.sg_image AS image
FROM ".$modx->getFullTableName(\'site_content\')." AS sc
LEFT JOIN ".$modx->getFullTableName(\'site_tmplvar_contentvalues\')." AS tcv ON tcv.contentid = sc.id
LEFT JOIN ".$modx->getFullTableName(\'countries_info\')." AS ci ON ci.code = tcv.value
LEFT JOIN ".$modx->getFullTableName(\'countries_temperature\')." AS ct ON ct.code = tcv.value
LEFT JOIN ".$modx->getFullTableName(\'countries_tour_types\')." AS ctt ON ctt.code = tcv.value
LEFT JOIN ".$modx->getFullTableName(\'site_content\')." AS sctt ON sctt.id = ctt.tour_type_id
LEFT JOIN (
	SELECT 
	q.code,
	GROUP_CONCAT(q.months ORDER BY q.tour_type_id SEPARATOR \';\') AS tourTypesMonths
	FROM 
	(
		SELECT code, tour_type_id, GROUP_CONCAT(month ORDER BY month) as months 
		FROM ".$modx->getFullTableName(\'countries_tour_types\')."
		GROUP BY code, tour_type_id
	) q
	GROUP BY q.code
) AS m ON m.code = tcv.value
LEFT JOIN ".$modx->getFullTableName(\'sg_images\')." AS sg ON sg.sg_rid = sc.id AND sg.sg_index = 0
WHERE
tcv.tmplvarid = $countryIdTv
GROUP BY sc.id
");
$countries = Array();
while($row = $modx->db->getRow($result)) 
{
		if ($row[\'id\']==18) {
	echo \'<pre style="display:none">\';
var_dump($row);
echo \'</pre>\';
	}
	
	if (!empty($row[\'tourTypes\']))
		$row[\'tourTypes\'] = explode(\',\',$row[\'tourTypes\']);
	else
		$row[\'tourTypes\'] = Array();
	
	if (!empty($row[\'tourTypesMonths\']))
	{
		$row[\'tourTypesMonths\'] = explode(\';\',$row[\'tourTypesMonths\']);
		foreach ($row[\'tourTypesMonths\'] as &$ttm)
		{
			$ttm = explode(\',\', $ttm);
			foreach ($ttm as &$ttm_el)
				$ttm_el = (int)$ttm_el;
		}	
	}
	else
		$row[\'tourTypesMonths\'] = Array();
	
	
	$airTemp = $waterTemp = Array();
	foreach ($row as $k => $v) 
	{
		if (strpos($k, \'air_\') === 0) 
		{
			$airTemp[] = $v;
			unset($row[$k]);
		}
		else if (strpos($k, \'water_\') === 0) 
		{
			$waterTemp[] = $v;
			unset($row[$k]);
		}
	}
	$row[\'airTemp\'] = $airTemp;
	$row[\'waterTemp\'] = $waterTemp;
	
	$row[\'url\'] = $modx->makeUrl($row[\'id\']);
	
	if (isset($phpthumb) && !empty($phpthumb))
		$row[\'image\'] = $modx->runSnippet(\'phpthumb\',Array(
			\'input\' => $row[\'image\'],
			\'options\' => $phpthumb
		));


	$countries[] = $row;
}
echo \'<pre style="display:none">\';
var_dump($countries[12][\'tourTypesMonths\']);
echo \'</pre>\';

// Типы туров
$result = $modx->db->query("
SELECT 
id, pagetitle, alias FROM evo_site_content
WHERE
parent = $tourTypesRid
ORDER BY menuindex, pagetitle
");
$tourTypes = Array();
while($row = $modx->db->getRow($result)) 
	$tourTypes[] = $row;
// var_dump($tourTypes);
// Какие предвыбраны типы туров?
if (isset($tourTypesChecked) && !empty($tourTypesChecked))
{
	$tourTypesChecked = explode(\',\',$tourTypesChecked);
}
else if (isset($_COOKIE[\'CountriesCalendar_tourTypes\']) && !empty($_COOKIE[\'CountriesCalendar_tourTypes\']))
	$tourTypesChecked = explode(\',\',$_COOKIE[\'CountriesCalendar_tourTypes\']);
else 
	$tourTypesChecked = Array($tourTypes[0]);

//var_dump($countries[0][\'tourTypesMonths\']);

// Запуск плагина
$init = "
var cc = new CountriesCalendar({
    elId: \\"$elid\\",
	display: $display
});
";
// Регистрируем плагин
$cjson = json_encode($countries);
$cjson = str_replace(\'[[\',\'[ [\',$cjson);
$cjson = str_replace(\']]\',\'] ]\',$cjson);
$src = "<script>var countriesCalendar = ".$cjson.";</script>"; 
$modx->regClientScript($src);
$src = file_get_contents(MODX_BASE_PATH."/assets/modules/countries/js/countriesCalendar.js");
$modx->regClientScript("<script>".$src.\' \'.$init."</script>");
/*$src = "/assets/modules/countries/js/countriesCalendar.js";
$modx->regClientScript($src);*/
?>
<form action="" class="relax__filter">
    <div class="relax__months">
		<div class="relax__season relax__season_winter">
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 11) echo "checked"; ?> value="11" class="relax__checkbox"><span class="relax__label">дек</span></label>
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 0) echo "checked"; ?> value="0" class="relax__checkbox"><span class="relax__label">янв</span></label>
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 1) echo "checked"; ?> value="1" class="relax__checkbox"><span class="relax__label">фев</span></label>
		</div>
		<div class="relax__season relax__season_spring">
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 2) echo "checked"; ?> value="2" class="relax__checkbox"><span class="relax__label">мар</span></label>
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 3) echo "checked"; ?> value="3" class="relax__checkbox"><span class="relax__label">апр</span></label>
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 4) echo "checked"; ?> value="4" class="relax__checkbox"><span class="relax__label">май</span></label>
		</div>
		<div class="relax__season relax__season_summer">
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 5) echo "checked"; ?> value="5" class="relax__checkbox"><span class="relax__label">июн</span></label>
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 6) echo "checked"; ?> value="6" class="relax__checkbox"><span class="relax__label">июл</span></label>
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 7) echo "checked"; ?> value="7" class="relax__checkbox"><span class="relax__label">авг</span></label>

		</div>
		<div class="relax__season relax__season_autumn">
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 8) echo "checked"; ?> value="8" class="relax__checkbox"><span class="relax__label">сент</span></label>
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 9) echo "checked"; ?> value="9" class="relax__checkbox"><span class="relax__label">окт</span></label>
			<label class="relax__month relax__control"><input type="radio" name="month" <?php if ($month == 10) echo "checked"; ?> value="10" class="relax__checkbox"><span class="relax__label">ноя</span></label>
		</div>
	</div>
    
    <div class="relax__filter-type">
        <label class="relax__visa">
            <input type="checkbox" name="visa" class="relax__checkbox-custom"><span class="relax__label relax__label_visa">без виз</span>
        </label>

        <div class="relax__types">
            <div class="relax__types-label">Вид отдыха:</div>
			<?php 
			foreach ($tourTypes as $tt) :
			$checked = in_array($tt[\'alias\'], $tourTypesChecked) ? " checked" : "";
            echo "<label class=\\"relax__type relax__control\\" data-id=\\"{$tt[\'id\']}\\"><input type=\\"checkbox\\" name=\\"type\\" value=\\"{$tt[\'alias\']}\\" class=\\"relax__checkbox\\"$checked><span class=\\"relax__label\\">{$tt[\'pagetitle\']}</span></label>";
			endforeach; ?>
        </div>
    </div>
</form>

<div class="relax__countries row" id="cctest">
<?php
// Статика без температуры
/*
	foreach ($countries as $c) :
?>
    <div class="relax__country col-12 col-sm-6 col-md-6 col-lg-4">
        <a href="" class="relax__link">
            <span class="relax__figure">
				<?php
				echo "<img src=\\"{$c[\'image\']}\\" alt=\\"\\" class=\\"relax__img\\">";
                echo "<span class=\\"relax__country-name\\">{$c[\'pagetitle\']}</span>";
				
				if ($c[\'price_from\'] > 0)
                	echo "<span class=\\"relax__price\\">От {$c[\'price_from\']} руб.</span>";
				
				if (!empty($c[\'tourTypes\'])) 
				{
					echo \'<span class="relax__type-icons">\';
					$tourTypes = explode(\',\',$c[\'tourTypes\']);
					foreach ($tourTypes as $tt)
						echo "<i class=\\"relax__type-icon relax__type-icon_{$tt}\\"></i>";
					echo \'</span>\';
				}
				?>
            </span>
            <span class="relax__info">
                <span class="relax__temp">
                    <i class="relax__icon relax__icon_air"></i><span class="relax__temp-value">+23 &deg;C</span>
                </span>
                <span class="relax__temp">
                    <i class="relax__icon relax__icon_water"></i><span class="relax__temp-value">+18 &deg;C</span>
                </span>
				<?php
				if ($c[\'visa\'] === "0")
                	echo "<span class=\\"relax__novisa\\">без виз</span>";
				?>
            </span>
        </a>
    </div>   
<?php 
	endforeach;
*/
?>
</div>
<button class="relax__more d-none" type="button">Показать еще</button>';$s['canonical']='if ($modx->documentIdentifier != 1) {
	return \'[(site_url)][~[*id*]~]\';
} else {
	return \'[(site_url)]\';
}';$s['checkboxes2rows']='return require MODX_BASE_PATH.\'assets/snippets/checkboxes2rows/checkboxes2rows.php\';';$s['Склонение окончания после числительных']='/**
 * Склонение окончания после числительных
 * @param num {int} - числительное
 * @param words {string} - варианты написания для количества 1, 2 и 5
 * @return string
 * Пример
 * [[declension? &num=`5` &words=`день,дня,дней`]]
 * 5 дней
 */
if (isset($num) && isset($words)) {
    $count = $num % 100;
    $words = explode(\',\', $words);

    if ($count >= 5 && $count <= 20) {
        return  $words[\'2\'];
    } else {
        $count = $count % 10;
        if ($count == 1) {
            return $words[\'0\'];
        } else if ($count >= 2 && $count <= 4) {
            return  $words[\'1\'];
        } else {
            return  $words[\'2\'];
        }
    }
}';$s['GetIdYoutube']='$str = strstr($id, \'=\'); 
echo substr($str, 1);';$s['FormSimpleGallery']='return require MODX_BASE_PATH.\'assets/snippets/FormSimpleGallery/FormSimpleGallery.php\';';$s['hotelSearchForm']='return require MODX_BASE_PATH.\'assets/snippets/hotelSearchForm/hotelSearchForm.php\';';$s['hotelSearchResults']='return require MODX_BASE_PATH.\'assets/snippets/hotelSearchResults/hotelSearchResults.php\';';$s['pageHotel']='return require MODX_BASE_PATH.\'assets/snippets/pageHotel/pageHotel.php\';';$s['rating2word']='return require MODX_BASE_PATH.\'assets/snippets/rating2word/rating2word.php\';';$s['declension']='return require MODX_BASE_PATH.\'assets/snippets/declension/declension.php\';';$s['rowMultiplier']='return require MODX_BASE_PATH.\'assets/snippets/rowMultiplier/rowMultiplier.php\';';$p=&$this->pluginCache;$p['FileSource']='require MODX_BASE_PATH.\'assets/plugins/filesource/plugin.filesource.php\';';$p['FileSourceProps']='{"prefix":"client_"}';$p['ClientSettings']='$e = &$modx->event;

switch ($e->name) {
    case \'OnManagerMenuPrerender\': {
        $_customlang = include MODX_BASE_PATH . \'assets/modules/clientsettings/lang.php\';
        
        $userlang = $modx->getConfig(\'manager_language\');
        $langitem = isset($_customlang[$userlang]) ? $_customlang[$userlang] : reset($_customlang);
        
        $moduleid = $modx->db->getValue($modx->db->select(\'id\', $modx->getFullTablename(\'site_modules\'), "name = \'ClientSettings\'"));
        
        $params[\'menu\'][\'client_settings\'] = [
            \'client_settings\',
            \'main\',
            \'<i class="fa fa-cog"></i>\' . $langitem,
            \'index.php?a=112&id=\' . $moduleid,
            $langitem,
            \'\',
            \'\',
            \'main\',
            0,
            100,
            \'\',
        ];
        
        $e->output(serialize($params[\'menu\']));
        return;
    }

    case \'OnWebPageInit\':
    case \'OnManagerPageInit\': {
        $modx->db->query("DELETE FROM " . $modx->getFullTableName(\'site_plugin_events\') . "
            WHERE pluginid IN (
               SELECT id
               FROM " . $modx->getFullTableName(\'site_plugins\') . "
               WHERE name = \'" . $e->activePlugin . "\'
               AND disabled = 0
            )
            AND evtid IN (
               SELECT id
               FROM " . $modx->getFullTableName(\'system_eventnames\') . "
               WHERE name IN (\'OnWebPageInit\', \'OnManagerPageInit\')
            )");

        $modx->clearCache(\'full\');

        $table  = $modx->getFullTableName(\'system_eventnames\');
        $events = [\'OnBeforeClientSettingsSave\', \'OnClientSettingsSave\'];
        $query  = $modx->db->select(\'*\', $table, "`name` IN (\'" . implode("\', \'", $events) . "\')");

        $events = array_flip($events);
        while ($row = $modx->db->getRow($query)) {
            if (isset($events[$row[\'name\']])) {
                unset($events[$row[\'name\']]);
            }
        }

        foreach (array_flip($events) as $event) {
            $modx->db->insert([
                \'name\'      => $event,
                \'service\'   => 6,
                \'groupname\' => \'ClientSettings\',
            ], $table);
        }

        return;
    }
}';$p['ClientSettingsProps']='{"prefix":"client_"}';$p['ManagerManager']='/**
 * ManagerManager
 *
 * Customize the EVO Manager to offer bespoke admin functions for end users or manipulate the display of document fields in the manager.
 *
 * @category plugin
 * @version 0.6.3
 * @license http://creativecommons.org/licenses/GPL/2.0/ GNU Public License (GPL v2)
 * @internal @properties &remove_deprecated_tv_types_pref=Remove deprecated TV types;list;yes,no;yes &config_chunk=Configuration Chunk;text;mm_rules
 * @internal @events OnDocFormRender,OnDocFormPrerender,OnBeforeDocFormSave,OnDocFormSave,OnDocDuplicate,OnPluginFormRender,OnTVFormRender
 * @internal @modx_category Manager and Admin
 * @internal @installset base
 * @internal @legacy_names Image TV Preview, Show Image TVs
 * @reportissues https://github.com/DivanDesign/MODXEvo.plugin.ManagerManager/
 * @documentation README [+site_url+]assets/plugins/managermanager/readme.html
 * @documentation Official docs http://code.divandesign.biz/modx/managermanager
 * @link        Latest version http://code.divandesign.biz/modx/managermanager
 * @link        Additional tools http://code.divandesign.biz/modx
 * @link        Full changelog http://code.divandesign.biz/modx/managermanager/changelog
 * @author      Inspired by: HideEditor plugin by Timon Reinhard and Gildas; HideManagerFields by Brett @ The Man Can!
 * @author      DivanDesign studio http://www.DivanDesign.biz
 * @author      Nick Crossland http://www.rckt.co.uk
 * @author      Many others
 * @lastupdate  22/01/2018
 */

// Run the main code
include($modx->config[\'base_path\'].\'assets/plugins/managermanager/mm.inc.php\');';$p['ManagerManagerProps']='{"prefix":"client_","remove_deprecated_tv_types_pref":"yes","config_chunk":"mm_rules"}';$p['CodeMirror']='/**
 * CodeMirror
 *
 * JavaScript library that can be used to create a relatively pleasant editor interface based on CodeMirror 5.33 (released on 21-12-2017)
 *
 * @category    plugin
 * @version     1.5
 * @license     http://www.gnu.org/copyleft/gpl.html GNU Public License (GPL)
 * @package     evo
 * @internal    @events OnDocFormRender,OnChunkFormRender,OnModFormRender,OnPluginFormRender,OnSnipFormRender,OnTempFormRender,OnRichTextEditorInit
 * @internal    @modx_category Manager and Admin
 * @internal    @properties &theme=Theme;list;default,ambiance,blackboard,cobalt,eclipse,elegant,erlang-dark,lesser-dark,midnight,monokai,neat,night,one-dark,rubyblue,solarized,twilight,vibrant-ink,xq-dark,xq-light;default &darktheme=Dark Theme;list;default,ambiance,blackboard,cobalt,eclipse,elegant,erlang-dark,lesser-dark,midnight,monokai,neat,night,one-dark,rubyblue,solarized,twilight,vibrant-ink,xq-dark,xq-light;one-dark &fontSize=Font-size;list;10,11,12,13,14,15,16,17,18;14 &lineHeight=Line-height;list;1,1.1,1.2,1.3,1.4,1.5;1.3 &indentUnit=Indent unit;int;4 &tabSize=The width of a tab character;int;4 &lineWrapping=lineWrapping;list;true,false;true &matchBrackets=matchBrackets;list;true,false;true &activeLine=activeLine;list;true,false;false &emmet=emmet;list;true,false;true &search=search;list;true,false;false &indentWithTabs=indentWithTabs;list;true,false;true &undoDepth=undoDepth;int;200 &historyEventDelay=historyEventDelay;int;1250
 * @internal    @installset base
 * @reportissues https://github.com/evolution-cms/evolution/issues/
 * @documentation Official docs https://codemirror.net/doc/manual.html
 * @author      hansek from http://www.modxcms.cz
 * @author      update Mihanik71
 * @author      update Deesen
 * @author      update 64j
 * @lastupdate  08-01-2018
 */

$_CM_BASE = \'assets/plugins/codemirror/\';

$_CM_URL = $modx->config[\'site_url\'] . $_CM_BASE;

require(MODX_BASE_PATH. $_CM_BASE .\'codemirror.plugin.php\');';$p['CodeMirrorProps']='{"prefix":"client_","theme":"default","darktheme":"one-dark","fontSize":"14","lineHeight":"1.3","indentUnit":"4","tabSize":"4","lineWrapping":"true","matchBrackets":"true","activeLine":"false","emmet":"true","search":"false","indentWithTabs":"true","undoDepth":"200","historyEventDelay":"1250"}';$p['userHelper']='/**
 * userHelper
 * 
 * addition to FormLister
 * 
 * @category    plugin
 * @version     1.19.0
 * @internal    @properties &model=Model;text;\\\\modUsers &logoutKey=Request key;text;logout &cookieName=Cookie Name;text;WebLoginPE &cookieLifetime=Cookie Lifetime, seconds;text;157680000 &maxFails=Max failed logins;text;3 &blockTime=Block for, seconds;text;3600 &trackWebUserActivity=Track web user activity;list;No,Yes;No
 * @internal    @events OnWebAuthentication,OnWebPageInit,OnPageNotFound,OnWebLogin
 * @internal    @modx_category Content
 * @internal    @disabled 1
**/

require MODX_BASE_PATH.\'assets/snippets/FormLister/plugin.userHelper.php\';';$p['userHelperProps']='{"prefix":"client_","logoutKey":"logout","cookieName":"WebLoginPE","cookieLifetime":"157680000","maxFails":"3","blockTime":"3600","trackWebUserActivity":"No","model":"\\\\\\\\modUsers"}';$p['Forgot Manager Login']='require MODX_BASE_PATH.\'assets/plugins/forgotmanagerlogin/plugin.forgotmanagerlogin.php\';';$p['Forgot Manager LoginProps']='{"prefix":"client_"}';$p['ElementsInTree']='require MODX_BASE_PATH.\'assets/plugins/elementsintree/plugin.elementsintree.php\';';$p['ElementsInTreeProps']='{"prefix":"client_","adminRoleOnly":"yes","treeButtonsInTab":"yes"}';$p['sgThumb']='require MODX_BASE_PATH.\'assets/plugins/simplegallery/plugin.sgthumb.php\';';$p['sgThumbProps']='{"prefix":"client_","tconfig":"See plugin code for details","keepOriginal":"No","originalFolder":"original"}';$p['TransAlias']='require MODX_BASE_PATH.\'assets/plugins/transalias/plugin.transalias.php\';';$p['TransAliasProps']='{"table_name":"russian","char_restrict":"lowercase alphanumeric","remove_periods":"Yes","word_separator":"dash"}';$p['TinyMCE4']='/**
 * TinyMCE4
 *
 * Javascript rich text editor
 *
 * @category    plugin
 * @version     4.9.11
 * @license     http://www.gnu.org/copyleft/gpl.html GNU Public License (GPL)
 * @internal    @properties &styleFormats=Custom Style Formats <b>RAW</b><br/><br/><ul><li>leave empty to use below block/inline formats</li><li>allows simple-format: <i>Title,cssClass|Title2,cssClass2</i></li><li>Also accepts full JSON-config as per TinyMCE4 docs / configure / content-formating / style_formats</li></ul>;textarea; &styleFormats_inline=Custom Style Formats <b>INLINE</b><br/><br/><ul><li>will wrap selected text with span-tag + css-class</li><li>simple-format only</li></ul>;textarea;InlineTitle,cssClass1|InlineTitle2,cssClass2 &styleFormats_block=Custom Style Formats <b>BLOCK</b><br/><br/><ul><li>will add css-class to selected block-element</li><li>simple-format only</li></ul>;textarea;BlockTitle,cssClass3|BlockTitle2,cssClass4 &customParams=Custom Parameters<br/><b>(Be careful or leave empty!)</b>;textarea; &entityEncoding=Entity Encoding;list;named,numeric,raw;named &entities=Entities;text; &pathOptions=Path Options;list;Site config,Absolute path,Root relative,URL,No convert;Site config &resizing=Advanced Resizing;list;true,false;false &disabledButtons=Disabled Buttons;text; &webTheme=Web Theme;test;webuser &webPlugins=Web Plugins;text; &webButtons1=Web Buttons 1;text;bold italic underline strikethrough removeformat alignleft aligncenter alignright &webButtons2=Web Buttons 2;text;link unlink image undo redo &webButtons3=Web Buttons 3;text; &webButtons4=Web Buttons 4;text; &webAlign=Web Toolbar Alignment;list;ltr,rtl;ltr &width=Width;text;100% &height=Height;text;400px &introtextRte=<b>Introtext RTE</b><br/>add richtext-features to "introtext";list;enabled,disabled;disabled &inlineMode=<b>Inline-Mode</b>;list;enabled,disabled;disabled &inlineTheme=<b>Inline-Mode</b><br/>Theme;text;inline &browser_spellcheck=<b>Browser Spellcheck</b><br/>At least one dictionary must be installed inside your browser;list;enabled,disabled;disabled &paste_as_text=<b>Force Paste as Text</b>;list;enabled,disabled;disabled
 * @internal    @events OnLoadWebDocument,OnParseDocument,OnWebPagePrerender,OnLoadWebPageCache,OnRichTextEditorRegister,OnRichTextEditorInit,OnInterfaceSettingsRender
 * @internal    @modx_category Manager and Admin
 * @internal    @legacy_names TinyMCE Rich Text Editor
 * @internal    @installset base
 * @logo        /assets/plugins/tinymce4/tinymce/logo.png
 * @reportissues https://github.com/extras-evolution/tinymce4-for-modx-evo
 * @documentation Plugin docs https://github.com/extras-evolution/tinymce4-for-modx-evo
 * @documentation Official TinyMCE4-docs https://www.tinymce.com/docs/
 * @author      Deesen
 * @lastupdate  2018-01-17
 */
if (!defined(\'MODX_BASE_PATH\')) { die(\'What are you doing? Get out of here!\'); }

require(MODX_BASE_PATH."assets/plugins/tinymce4/plugin.tinymce.inc.php");';$p['TinyMCE4Props']='{"styleFormats_inline":"InlineTitle,cssClass1|InlineTitle2,cssClass2","styleFormats_block":"BlockTitle,cssClass3|BlockTitle2,cssClass4","entityEncoding":"named","pathOptions":"Absolute path","resizing":"false","webTheme":"webuser","webButtons1":"bold italic underline strikethrough removeformat alignleft aligncenter alignright","webButtons2":"link unlink image undo redo","webAlign":"ltr","width":"100%","height":"400px","introtextRte":"disabled","inlineMode":"disabled","inlineTheme":"inline","browser_spellcheck":"enabled","paste_as_text":"disabled"}';$p['OutdatedExtrasCheck']='/**
 * OutdatedExtrasCheck
 *
 * Check for Outdated critical extras not compatible with EVO 1.4.6
 *
 * @category	plugin
 * @version     1.4.6
 * @license 	http://www.gnu.org/copyleft/gpl.html GNU Public License (GPL)
 * @package     evo
 * @author      Author: Nicola Lambathakis
 * @internal    @events OnManagerWelcomeHome
 * @internal    @properties &wdgVisibility=Show widget for:;menu;All,AdminOnly,AdminExcluded,ThisRoleOnly,ThisUserOnly;AdminOnly &ThisRole=Run only for this role:;string;;;(role id) &ThisUser=Run only for this user:;string;;;(username)
 * @internal    @modx_category Manager and Admin
 * @internal    @installset base
 * @internal    @disabled 0
 */

require MODX_BASE_PATH . \'assets/plugins/extrascheck/OutdatedExtrasCheck.plugin.php\';';$p['OutdatedExtrasCheckProps']='{"wdgVisibility":"All","DittoVersion":"2.1.3","EformVersion":"1.4.9","AjaxSearchVersion":"1.11.0","WayfinderVersion":"2.0.5","WebLoginVersion":"1.2","WebSignupVersion":"1.1.2","WebChangePwdVersion":"1.1.2","BreadcrumbsVersion":"1.0.5","ReflectVersion":"2.2","JotVersion":"1.1.5","MtvVersion":"2.0.13","badthemes":"MODxRE2_DropdownMenu,MODxRE2,MODxRE,MODxCarbon,D3X,MODxFLAT,wMOD,ScienceStyle"}';$p['SimpleGallery']='require MODX_BASE_PATH.\'assets/plugins/simplegallery/plugin.simplegallery.php\';';$p['SimpleGalleryProps']='{"tabName":"\\u0413\\u0430\\u043b\\u0435\\u0440\\u0435\\u044f","templates":"6,9,13,22","documents":"75","folder":"assets\\/galleries\\/","thumbsCache":"assets\\/.sgThumbs\\/","w":"140","h":"105","clientResize":"No","jpegQuality":"0.93","skipPHPThumb":"No","allowDuplicate":"No"}';$e=&$this->pluginEvent;$e['OnBeforeDocFormSave']=array('ManagerManager');$e['OnBeforeManagerLogin']=array('Forgot Manager Login');$e['OnBeforePluginFormSave']=array('FileSource');$e['OnBeforeSnipFormSave']=array('FileSource');$e['OnChunkFormDelete']=array('ElementsInTree');$e['OnChunkFormRender']=array('CodeMirror');$e['OnChunkFormSave']=array('ElementsInTree');$e['OnDocDuplicate']=array('ManagerManager','SimpleGallery');$e['OnDocFormPrerender']=array('ManagerManager');$e['OnDocFormRender']=array('CodeMirror','SimpleGallery','ManagerManager');$e['OnDocFormSave']=array('ManagerManager');$e['OnEmptyTrash']=array('SimpleGallery');$e['OnFileBrowserUpload']=array('sgThumb');$e['OnInterfaceSettingsRender']=array('TinyMCE4');$e['OnLoadWebDocument']=array('TinyMCE4');$e['OnLoadWebPageCache']=array('TinyMCE4');$e['OnManagerAuthentication']=array('Forgot Manager Login');$e['OnManagerLoginFormRender']=array('Forgot Manager Login');$e['OnManagerMainFrameHeaderHTMLBlock']=array('ElementsInTree');$e['OnManagerMenuPrerender']=array('ClientSettings');$e['OnManagerTreePrerender']=array('ElementsInTree');$e['OnManagerTreeRender']=array('ElementsInTree');$e['OnManagerWelcomeHome']=array('OutdatedExtrasCheck');$e['OnModFormDelete']=array('ElementsInTree');$e['OnModFormRender']=array('CodeMirror');$e['OnModFormSave']=array('ElementsInTree');$e['OnPageNotFound']=array('userHelper');$e['OnParseDocument']=array('TinyMCE4');$e['OnPluginFormDelete']=array('ElementsInTree');$e['OnPluginFormPrerender']=array('FileSource');$e['OnPluginFormRender']=array('ManagerManager','FileSource','CodeMirror');$e['OnPluginFormSave']=array('ElementsInTree');$e['OnRichTextEditorInit']=array('CodeMirror','TinyMCE4');$e['OnRichTextEditorRegister']=array('TinyMCE4');$e['OnSimpleGalleryDelete']=array('sgThumb');$e['OnSimpleGalleryMove']=array('sgThumb');$e['OnSimpleGalleryRefresh']=array('sgThumb');$e['OnSnipFormDelete']=array('ElementsInTree');$e['OnSnipFormPrerender']=array('FileSource');$e['OnSnipFormRender']=array('FileSource','CodeMirror');$e['OnSnipFormSave']=array('ElementsInTree');$e['OnStripAlias']=array('TransAlias');$e['OnTempFormDelete']=array('ElementsInTree');$e['OnTempFormRender']=array('CodeMirror');$e['OnTempFormSave']=array('ElementsInTree');$e['OnTVFormDelete']=array('ElementsInTree');$e['OnTVFormRender']=array('ManagerManager');$e['OnTVFormSave']=array('ElementsInTree');$e['OnWebAuthentication']=array('userHelper');$e['OnWebLogin']=array('userHelper');$e['OnWebPageInit']=array('userHelper');$e['OnWebPagePrerender']=array('TinyMCE4');
